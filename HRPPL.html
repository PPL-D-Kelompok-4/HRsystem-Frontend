<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>HR System</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body class="bg-gray-100">
    <div x-data="hrSystem" class="flex h-screen bg-gray-100">
        <!-- Sidebar -->
        <div class="w-64 bg-[#f8f5e4] border-r border-gray-200 flex flex-col h-screen">
            <!-- User Profile Section -->
            <div class="p-6 flex flex-col items-center justify-center border-b border-gray-200">
                <div class="w-16 h-16 bg-gray-300 rounded-full mb-2"></div>
                <p class="text-gray-700 font-medium" x-text="`${userProfile.firstName} ${userProfile.lastName}`"></p>
            </div>

            <!-- Navigation Menu -->
            <div class="flex-1 overflow-y-auto py-4">
                <div class="px-4 py-2">
                    <a href="#" @click.prevent="currentView = 'dashboard'"
                        class="flex items-center space-x-3 text-gray-700 hover:bg-gray-200 px-2 py-2 rounded-md">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-600" viewBox="0 0 24 24"
                            fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                            stroke-linejoin="round">
                            <rect x="3" y="3" width="7" height="7"></rect>
                            <rect x="14" y="3" width="7" height="7"></rect>
                            <rect x="14" y="14" width="7" height="7"></rect>
                            <rect x="3" y="14" width="7" height="7"></rect>
                        </svg>
                        <span>Dashboard</span>
                    </a>
                </div>

                <div class="px-4 py-2">
                    <a href="#" @click.prevent="currentView = 'attendance'"
                        class="flex items-center space-x-3 text-gray-700 hover:bg-gray-200 px-2 py-2 rounded-md">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-600" viewBox="0 0 24 24"
                            fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                            stroke-linejoin="round">
                            <path d="M8 2v4"></path>
                            <path d="M16 2v4"></path>
                            <rect x="2" y="6" width="20" height="16" rx="2"></rect>
                            <path d="M7 12h10"></path>
                            <path d="M7 16h10"></path>
                        </svg>
                        <span>Attendance</span>
                    </a>
                </div>

                <div class="px-4 py-2">
                    <div @click="toggleMenu('leave')"
                        class="flex items-center justify-between text-gray-700 hover:bg-gray-200 px-2 py-2 rounded-md cursor-pointer">
                        <div class="flex items-center space-x-3">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-600" viewBox="0 0 24 24"
                                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round">
                                <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                                <line x1="16" y1="2" x2="16" y2="6"></line>
                                <line x1="8" y1="2" x2="8" y2="6"></line>
                                <line x1="3" y1="10" x2="21" y2="10"></line>
                                <path d="M8 14h.01"></path>
                                <path d="M12 14h.01"></path>
                                <path d="M16 14h.01"></path>
                                <path d="M8 18h.01"></path>
                                <path d="M12 18h.01"></path>
                                <path d="M16 18h.01"></path>
                            </svg>
                            <span>Leave Management</span>
                        </div>
                        <svg x-bind:class="{'transform rotate-180': menuOpen.leave}" xmlns="http://www.w3.org/2000/svg"
                            class="h-4 w-4 transition-transform duration-200" viewBox="0 0 20 20" fill="currentColor">
                            <path fill-rule="evenodd"
                                d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z"
                                clip-rule="evenodd" />
                        </svg>
                    </div>

                    <div x-show="menuOpen.leave" class="pl-10 mt-1">
                        <a href="#" @click.prevent="currentView = 'allRequests'"
                            class="flex items-center space-x-3 text-gray-700 hover:bg-gray-200 px-2 py-2 rounded-md">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-600" viewBox="0 0 24 24"
                                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round">
                                <path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2">
                                </path>
                                <rect x="8" y="2" width="8" height="4" rx="1" ry="1"></rect>
                                <path d="M12 11h4"></path>
                                <path d="M12 16h4"></path>
                                <path d="M8 11h.01"></path>
                                <path d="M8 16h.01"></path>
                            </svg>
                            <span>All Requests</span>
                        </a>
                        <a href="#" @click.prevent="currentView = 'newRequest'"
                            class="flex items-center space-x-3 text-gray-700 hover:bg-gray-200 px-2 py-2 rounded-md">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-600" viewBox="0 0 24 24"
                                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round">
                                <path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2">
                                </path>
                                <rect x="8" y="2" width="8" height="4" rx="1" ry="1"></rect>
                                <path d="M12 11h4"></path>
                                <path d="M12 16h4"></path>
                                <path d="M8 11h.01"></path>
                                <path d="M8 16h.01"></path>
                            </svg>
                            <span>New Leave Requests</span>
                        </a>
                    </div>
                </div>

                <div class="px-4 py-2">
                    <a href="#" @click.prevent="currentView = 'salary'"
                        class="flex items-center space-x-3 text-gray-700 hover:bg-gray-200 px-2 py-2 rounded-md">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-600" viewBox="0 0 24 24"
                            fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                            stroke-linejoin="round">
                            <circle cx="12" cy="12" r="10"></circle>
                            <line x1="12" y1="8" x2="12" y2="16"></line>
                            <line x1="8" y1="12" x2="16" y2="12"></line>
                        </svg>
                        <span>Salary</span>
                    </a>
                </div>

                <div class="px-4 py-2">
                    <a href="#" @click.prevent="currentView = 'workHours'"
                        class="flex items-center space-x-3 text-gray-700 hover:bg-gray-200 px-2 py-2 rounded-md">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-600" viewBox="0 0 24 24"
                            fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                            stroke-linejoin="round">
                            <circle cx="12" cy="12" r="10"></circle>
                            <polyline points="12 6 12 12 16 14"></polyline>
                        </svg>
                        <span>Work Hours</span>
                    </a>
                </div>

                <div class="px-4 py-2">
                    <a href="#" @click.prevent="currentView = 'reports'"
                        class="flex items-center space-x-3 text-gray-700 hover:bg-gray-200 px-2 py-2 rounded-md">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-600" viewBox="0 0 24 24"
                            fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                            stroke-linejoin="round">
                            <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                            <polyline points="14 2 14 8 20 8"></polyline>
                            <line x1="16" y1="13" x2="8" y2="13"></line>
                            <line x1="16" y1="17" x2="8" y2="17"></line>
                            <polyline points="10 9 9 9 8 9"></polyline>
                        </svg>
                        <span>Reports</span>
                    </a>
                </div>

                <div class="px-4 py-2 mt-3 border-t border-gray-200">
                    <div class="mt-3 text-xs text-gray-500 font-semibold tracking-wider">
                        PAGES
                    </div>
                </div>

                <div class="px-4 py-2">
                    <a href="#" @click.prevent="currentView = 'calendar'"
                        class="flex items-center space-x-3 text-gray-700 hover:bg-gray-200 px-2 py-2 rounded-md">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-600" viewBox="0 0 24 24"
                            fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                            stroke-linejoin="round">
                            <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                            <line x1="16" y1="2" x2="16" y2="6"></line>
                            <line x1="8" y1="2" x2="8" y2="6"></line>
                            <line x1="3" y1="10" x2="21" y2="10"></line>
                        </svg>
                        <span>Calendar</span>
                    </a>
                </div>

                <div class="px-4 py-2">
                    <div @click="toggleMenu('employees')"
                        class="flex items-center justify-between text-gray-700 hover:bg-gray-200 px-2 py-2 rounded-md cursor-pointer">
                        <div class="flex items-center space-x-3">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-600" viewBox="0 0 24 24"
                                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round">
                                <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                                <circle cx="9" cy="7" r="4"></circle>
                                <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
                                <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
                            </svg>
                            <span>Employees</span>
                        </div>
                        <svg x-bind:class="{'transform rotate-180': menuOpen.employees}"
                            xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 transition-transform duration-200"
                            viewBox="0 0 20 20" fill="currentColor">
                            <path fill-rule="evenodd"
                                d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z"
                                clip-rule="evenodd" />
                        </svg>
                    </div>

                    <div x-show="menuOpen.employees" class="pl-10 mt-1">
                        <a href="#" @click.prevent="currentView = 'allEmployees'"
                            class="flex items-center space-x-3 text-gray-700 hover:bg-gray-200 px-2 py-2 rounded-md">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-600" viewBox="0 0 24 24"
                                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round">
                                <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                                <circle cx="12" cy="7" r="4"></circle>
                            </svg>
                            <span>All Employees</span>
                        </a>
                        <a href="#" @click.prevent="currentView = 'addEmployee'"
                            class="flex items-center space-x-3 text-gray-700 hover:bg-gray-200 px-2 py-2 rounded-md">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-600" viewBox="0 0 24 24"
                                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round">
                                <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                                <circle cx="12" cy="7" r="4"></circle>
                            </svg>
                            <span>Add Employee</span>
                        </a>
                    </div>
                </div>

                <div class="px-4 py-2">
                    <a href="#" @click.prevent="currentView = 'profile'"
                        class="flex items-center space-x-3 text-gray-700 hover:bg-gray-200 px-2 py-2 rounded-md">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-600" viewBox="0 0 24 24"
                            fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                            stroke-linejoin="round">
                            <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                            <circle cx="12" cy="7" r="4"></circle>
                        </svg>
                        <span>Profile</span>
                    </a>
                </div>
            </div>
        </div>

        <!-- Main Content -->
        <div class="flex-1 overflow-auto">
            <!-- Dashboard View -->
            <div x-show="currentView === 'dashboard'" class="p-6">
                <div class="flex justify-between items-center mb-6">
                    <div>
                        <h1 class="text-3xl font-semibold text-gray-800">Dashboard</h1>
                        <p class="text-gray-500">Welcome to HR management dashboard.</p>
                    </div>
                    <button @click="currentView = 'addEmployee'" class="bg-black text-white px-4 py-2 rounded-md">
                        Add Employee
                    </button>
                </div>

                <!-- Stats Cards -->
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6">
                    <div class="bg-white p-4 rounded-md shadow-sm border border-gray-200">
                        <p class="text-gray-500 mb-1">Total Employees</p>
                        <p class="text-3xl font-bold" x-text="employees.length"></p>
                    </div>

                    <div class="bg-white p-4 rounded-md shadow-sm border border-gray-200">
                        <p class="text-gray-500 mb-1">Open Positions</p>
                        <p class="text-3xl font-bold">7</p>
                    </div>

                    <div class="bg-white p-4 rounded-md shadow-sm border border-gray-200">
                        <p class="text-gray-500 mb-1">Pending Reviews</p>
                        <p class="text-3xl font-bold"
                            x-text="leaveRequests.filter(lr => lr.status === 'Pending').length"></p>
                    </div>

                    <div class="bg-white p-4 rounded-md shadow-sm border border-gray-200">
                        <p class="text-gray-500 mb-1">Leave Request</p>
                        <p class="text-3xl font-bold" x-text="leaveRequests.length"></p>
                    </div>
                </div>

                <!-- Employee Overview Chart -->
                <div class="bg-white p-4 rounded-md shadow-sm border border-gray-200 mb-6">
                    <div class="flex items-center justify-between">
                        <h2 class="text-xl font-semibold">Employee Overview</h2>
                        <button @click="initEmployeeChart()"
                            class="text-xs px-2 py-1 bg-gray-100 hover:bg-gray-200 rounded-md flex items-center">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-3 w-3 mr-1" viewBox="0 0 20 20"
                                fill="currentColor">
                                <path fill-rule="evenodd"
                                    d="M4 2a1 1 0 011 1v2.101a7.002 7.002 0 0111.601 2.566 1 1 0 11-1.885.666A5.002 5.002 0 005.999 7H9a1 1 0 010 2H4a1 1 0 01-1-1V3a1 1 0 011-1zm.008 9.057a1 1 0 011.276.61A5.002 5.002 0 0014.001 13H11a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0v-2.101a7.002 7.002 0 01-11.601-2.566 1 1 0 01.61-1.276z"
                                    clip-rule="evenodd" />
                            </svg>
                            Refresh Chart
                        </button>
                    </div>
                    <p class="text-gray-500 text-sm mb-4">
                        Employee distribution by department
                    </p>
                    <div>
                        <canvas id="employeeChart" width="600" height="200"></canvas>
                    </div>
                </div>


                <!-- Two Column Layout -->
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                    <!-- Leave Requests -->
                    <div class="bg-white p-4 rounded-md shadow-sm border border-gray-200">
                        <h2 class="text-xl font-semibold mb-1">Leave Requests</h2>
                        <p class="text-gray-500 text-sm mb-4">
                            Pending leave requests requiring approval
                        </p>

                        <div class="space-y-4">
                            <template x-for="(request, index) in pendingLeaveRequests.slice(0, 3)" :key="index">
                                <div class="border-b pb-4 last:border-b-0 last:pb-0">
                                    <div class="flex justify-between">
                                        <div>
                                            <p class="font-medium" x-text="request.employee"></p>
                                            <p class="text-gray-500"
                                                x-text="request.type + ' - ' + request.days + ' day' + (request.days > 1 ? 's' : '')">
                                            </p>
                                            <p class="text-gray-400 text-sm"
                                                x-text="request.startDate + (request.endDate !== request.startDate ? ' - ' + request.endDate : '')">
                                            </p>
                                        </div>
                                        <div class="flex items-center space-x-2">
                                            <span
                                                class="px-3 py-1 bg-yellow-100 text-yellow-800 rounded-md text-sm">Pending</span>
                                            <button @click="approveLeaveRequest(getLeaveRequestIndex(request))"
                                                class="text-green-600 hover:text-green-800">
                                                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5"
                                                    viewBox="0 0 20 20" fill="currentColor">
                                                    <path fill-rule="evenodd"
                                                        d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"
                                                        clip-rule="evenodd" />
                                                </svg>
                                            </button>
                                            <button @click="rejectLeaveRequest(getLeaveRequestIndex(request))"
                                                class="text-red-600 hover:text-red-800">
                                                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5"
                                                    viewBox="0 0 20 20" fill="currentColor">
                                                    <path fill-rule="evenodd"
                                                        d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z"
                                                        clip-rule="evenodd" />
                                                </svg>
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </template>
                            <div x-show="pendingLeaveRequests.length === 0" class="text-center py-4 text-gray-500">
                                No pending leave requests
                            </div>
                        </div>
                    </div>

                    <!-- Recent Hires -->
                    <div class="bg-white p-4 rounded-md shadow-sm border border-gray-200">
                        <h2 class="text-xl font-semibold mb-1">Recent Hires</h2>
                        <p class="text-gray-500 text-sm mb-4">
                            New employees in the last 30 days
                        </p>

                        <div class="space-y-4">
                            <template x-for="(employee, index) in recentHires.slice(0, 3)" :key="index">
                                <div class="flex justify-between items-center">
                                    <div class="flex items-center">
                                        <div
                                            class="w-10 h-10 bg-gray-200 rounded-full flex items-center justify-center">
                                            <span class="text-gray-600 font-medium"
                                                x-text="employee.firstName.charAt(0) + employee.lastName.charAt(0)"></span>
                                        </div>
                                        <div class="ml-3">
                                            <p class="font-medium"
                                                x-text="employee.firstName + ' ' + employee.lastName"></p>
                                            <p class="text-gray-500 text-sm" x-text="employee.position"></p>
                                        </div>
                                    </div>
                                    <div>
                                        <p x-text="formatDate(employee.startDate)"></p>
                                    </div>
                                </div>
                            </template>
                            <div x-show="recentHires.length === 0" class="text-center py-4 text-gray-500">
                                No recent hires
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Attendance View -->
            <div x-show="currentView === 'attendance'" class="p-6">
                <div class="mb-6">
                    <h1 class="text-3xl font-semibold text-gray-800">Attendance</h1>
                    <p class="text-gray-500">Track your daily attendance and view history</p>
                </div>

                <!-- Current Date and Time -->
                <div class="bg-white p-6 rounded-md shadow-sm border border-gray-200 mb-6">
                    <div class="flex flex-col md:flex-row justify-between items-center">
                        <div>
                            <h2 class="text-xl font-semibold mb-2">Today's Attendance</h2>
                            <p class="text-gray-500" x-text="formatCurrentDate()"></p>
                            <p class="text-gray-500" x-text="currentTime" x-init="startClock()"></p>
                        </div>
                        <div class="mt-4 md:mt-0 flex flex-col sm:flex-row gap-4">
                            <button @click="checkIn()" :disabled="todayAttendance.checkIn"
                                :class="{'opacity-50 cursor-not-allowed': todayAttendance.checkIn}"
                                class="bg-black text-white px-6 py-3 rounded-md flex items-center justify-center">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" viewBox="0 0 24 24"
                                    fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                    stroke-linejoin="round">
                                    <path d="M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4"></path>
                                    <polyline points="10 17 15 12 10 7"></polyline>
                                    <line x1="15" y1="12" x2="3" y2="12"></line>
                                </svg>
                                Check In
                            </button>
                            <button @click="checkOut()" :disabled="!todayAttendance.checkIn || todayAttendance.checkOut"
                                :class="{'opacity-50 cursor-not-allowed': !todayAttendance.checkIn || todayAttendance.checkOut}"
                                class="bg-gray-800 text-white px-6 py-3 rounded-md flex items-center justify-center">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" viewBox="0 0 24 24"
                                    fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                    stroke-linejoin="round">
                                    <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path>
                                    <polyline points="16 17 21 12 16 7"></polyline>
                                    <line x1="21" y1="12" x2="9" y2="12"></line>
                                </svg>
                                Check Out
                            </button>
                        </div>
                    </div>

                    <!-- Today's Status -->
                    <div class="mt-6 border-t border-gray-200 pt-4">
                        <h3 class="text-lg font-medium mb-3">Today's Status</h3>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                            <div class="bg-gray-50 p-4 rounded-md">
                                <p class="text-sm text-gray-500 mb-1">Check In Time</p>
                                <p class="text-lg font-medium"
                                    x-text="todayAttendance.checkIn ? formatTime(todayAttendance.checkIn) : 'Not checked in yet'">
                                </p>
                            </div>
                            <div class="bg-gray-50 p-4 rounded-md">
                                <p class="text-sm text-gray-500 mb-1">Check Out Time</p>
                                <p class="text-lg font-medium"
                                    x-text="todayAttendance.checkOut ? formatTime(todayAttendance.checkOut) : 'Not checked out yet'">
                                </p>
                            </div>
                            <div class="bg-gray-50 p-4 rounded-md">
                                <p class="text-sm text-gray-500 mb-1">Work Duration</p>
                                <p class="text-lg font-medium" x-text="calculateWorkDuration()"></p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Attendance History -->
                <div class="bg-white p-6 rounded-md shadow-sm border border-gray-200">
                    <div class="flex justify-between items-center mb-6">
                        <h2 class="text-xl font-semibold">Attendance History</h2>
                        <button @click="showAttendanceHistoryModal = true"
                            class="bg-gray-800 text-white px-4 py-2 rounded-md flex items-center">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" viewBox="0 0 24 24" fill="none"
                                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                                <polyline points="14 2 14 8 20 8"></polyline>
                                <line x1="16" y1="13" x2="8" y2="13"></line>
                                <line x1="16" y1="17" x2="8" y2="17"></line>
                                <polyline points="10 9 9 9 8 9"></polyline>
                            </svg>
                            View Full History
                        </button>
                    </div>

                    <!-- Recent Attendance Records -->
                    <div class="overflow-x-auto">
                        <table class="min-w-full divide-y divide-gray-200">
                            <thead class="bg-gray-50">
                                <tr>
                                    <th scope="col"
                                        class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                        Date
                                    </th>
                                    <th scope="col"
                                        class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                        Check In
                                    </th>
                                    <th scope="col"
                                        class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                        Check Out
                                    </th>
                                    <th scope="col"
                                        class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                        Work Duration
                                    </th>
                                    <th scope="col"
                                        class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                        Status
                                    </th>
                                </tr>
                            </thead>
                            <tbody class="bg-white divide-y divide-gray-200">
                                <template x-for="(record, index) in recentAttendanceRecords" :key="index">
                                    <tr>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"
                                            x-text="formatDateForDisplay(record.date)"></td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500"
                                            x-text="record.checkIn ? formatTime(record.checkIn) : '-'"></td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500"
                                            x-text="record.checkOut ? formatTime(record.checkOut) : '-'"></td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500"
                                            x-text="calculateDuration(record.checkIn, record.checkOut)"></td>
                                        <td class="px-6 py-4 whitespace-nowrap">
                                            <span :class="{
                                'bg-green-100 text-green-800': record.status === 'Present',
                                'bg-yellow-100 text-yellow-800': record.status === 'Late',
                                'bg-red-100 text-red-800': record.status === 'Absent',
                                'bg-blue-100 text-blue-800': record.status === 'Half Day'
                                }" class="px-2 py-1 text-xs rounded-full" x-text="record.status"></span>
                                        </td>
                                    </tr>
                                </template>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Attendance History Modal -->
            <div x-show="showAttendanceHistoryModal" class="fixed z-10 inset-0 overflow-y-auto"
                aria-labelledby="attendance-history-modal-title" role="dialog" aria-modal="true">
                <div class="flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0">
                    <div x-show="showAttendanceHistoryModal" x-transition:enter="ease-out duration-300"
                        x-transition:enter-start="opacity-0" x-transition:enter-end="opacity-100"
                        x-transition:leave="ease-in duration-200" x-transition:leave-start="opacity-100"
                        x-transition:leave-end="opacity-0"
                        class="fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity" aria-hidden="true"></div>

                    <span class="hidden sm:inline-block sm:align-middle sm:h-screen" aria-hidden="true">&#8203;</span>

                    <div x-show="showAttendanceHistoryModal" x-transition:enter="ease-out duration-300"
                        x-transition:enter-start="opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"
                        x-transition:enter-end="opacity-100 translate-y-0 sm:scale-100"
                        x-transition:leave="ease-in duration-200"
                        x-transition:leave-start="opacity-100 translate-y-0 sm:scale-100"
                        x-transition:leave-end="opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"
                        class="inline-block align-bottom bg-white rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-4xl sm:w-full sm:p-6">
                        <div>
                            <div class="mt-3 text-center sm:mt-0 sm:text-left">
                                <h3 class="text-lg leading-6 font-medium text-gray-900"
                                    id="attendance-history-modal-title">
                                    Full Attendance History
                                </h3>

                                <div class="mt-4">
                                    <!-- Filter Controls -->
                                    <div class="flex flex-col sm:flex-row justify-between items-center mb-4 gap-4">
                                        <div class="flex space-x-4">
                                            <div class="relative">
                                                <select x-model="attendanceFilterMonth"
                                                    class="block w-full pl-3 pr-10 py-2 text-base border border-gray-300 focus:outline-none focus:ring-black focus:border-black sm:text-sm rounded-md appearance-none">
                                                    <option value="all">All Months</option>
                                                    <option value="0">January</option>
                                                    <option value="1">February</option>
                                                    <option value="2">March</option>
                                                    <option value="3">April</option>
                                                    <option value="4">May</option>
                                                    <option value="5">June</option>
                                                    <option value="6">July</option>
                                                    <option value="7">August</option>
                                                    <option value="8">September</option>
                                                    <option value="9">October</option>
                                                    <option value="10">November</option>
                                                    <option value="11">December</option>
                                                </select>
                                                <div
                                                    class="absolute inset-y-0 right-0 flex items-center px-2 pointer-events-none">
                                                    <svg xmlns="http://www.w3.org/2000/svg"
                                                        class="h-5 w-5 text-gray-400" viewBox="0 0 20 20"
                                                        fill="currentColor">
                                                        <path fill-rule="evenodd"
                                                            d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z"
                                                            clip-rule="evenodd" />
                                                    </svg>
                                                </div>
                                            </div>
                                            <div class="relative">
                                                <select x-model="attendanceFilterStatus"
                                                    class="block w-full pl-3 pr-10 py-2 text-base border border-gray-300 focus:outline-none focus:ring-black focus:border-black sm:text-sm rounded-md appearance-none">
                                                    <option value="all">All Status</option>
                                                    <option value="Present">Present</option>
                                                    <option value="Late">Late</option>
                                                    <option value="Absent">Absent</option>
                                                    <option value="Half Day">Half Day</option>
                                                </select>
                                                <div
                                                    class="absolute inset-y-0 right-0 flex items-center px-2 pointer-events-none">
                                                    <svg xmlns="http://www.w3.org/2000/svg"
                                                        class="h-5 w-5 text-gray-400" viewBox="0 0 20 20"
                                                        fill="currentColor">
                                                        <path fill-rule="evenodd"
                                                            d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z"
                                                            clip-rule="evenodd" />
                                                    </svg>
                                                </div>
                                            </div>
                                        </div>
                                        <div>
                                            <button @click="exportAttendanceHistory()"
                                                class="inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-black hover:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-black">
                                                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2"
                                                    viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                                    stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                                    <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                                                    <polyline points="7 10 12 15 17 10"></polyline>
                                                    <line x1="12" y1="15" x2="12" y2="3"></line>
                                                </svg>
                                                Export
                                            </button>
                                        </div>
                                    </div>

                                    <!-- Attendance Table -->
                                    <div class="overflow-x-auto max-h-96">
                                        <table class="min-w-full divide-y divide-gray-200">
                                            <thead class="bg-gray-50 sticky top-0">
                                                <tr>
                                                    <th scope="col"
                                                        class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                                        Date
                                                    </th>
                                                    <th scope="col"
                                                        class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                                        Check In
                                                    </th>
                                                    <th scope="col"
                                                        class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                                        Check Out
                                                    </th>
                                                    <th scope="col"
                                                        class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                                        Work Duration
                                                    </th>
                                                    <th scope="col"
                                                        class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                                        Status
                                                    </th>
                                                </tr>
                                            </thead>
                                            <tbody class="bg-white divide-y divide-gray-200">
                                                <template x-for="(record, index) in filteredAttendanceRecords"
                                                    :key="index">
                                                    <tr>
                                                        <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"
                                                            x-text="formatDateForDisplay(record.date)"></td>
                                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500"
                                                            x-text="record.checkIn ? formatTime(record.checkIn) : '-'">
                                                        </td>
                                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500"
                                                            x-text="record.checkOut ? formatTime(record.checkOut) : '-'">
                                                        </td>
                                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500"
                                                            x-text="calculateDuration(record.checkIn, record.checkOut)">
                                                        </td>
                                                        <td class="px-6 py-4 whitespace-nowrap">
                                                            <span :class="{
                                        'bg-green-100 text-green-800': record.status === 'Present',
                                        'bg-yellow-100 text-yellow-800': record.status === 'Late',
                                        'bg-red-100 text-red-800': record.status === 'Absent',
                                        'bg-blue-100 text-blue-800': record.status === 'Half Day'
                                        }" class="px-2 py-1 text-xs rounded-full" x-text="record.status"></span>
                                                        </td>
                                                    </tr>
                                                </template>
                                            </tbody>
                                        </table>
                                    </div>

                                    <!-- Summary Stats -->
                                    <div class="mt-6 border-t border-gray-200 pt-4">
                                        <h4 class="text-md font-medium mb-3">Summary</h4>
                                        <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                                            <div class="bg-gray-50 p-3 rounded-md">
                                                <p class="text-xs text-gray-500 mb-1">Present Days</p>
                                                <p class="text-lg font-medium"
                                                    x-text="countAttendanceByStatus('Present')"></p>
                                            </div>
                                            <div class="bg-gray-50 p-3 rounded-md">
                                                <p class="text-xs text-gray-500 mb-1">Late Days</p>
                                                <p class="text-lg font-medium" x-text="countAttendanceByStatus('Late')">
                                                </p>
                                            </div>
                                            <div class="bg-gray-50 p-3 rounded-md">
                                                <p class="text-xs text-gray-500 mb-1">Absent Days</p>
                                                <p class="text-lg font-medium"
                                                    x-text="countAttendanceByStatus('Absent')"></p>
                                            </div>
                                            <div class="bg-gray-50 p-3 rounded-md">
                                                <p class="text-xs text-gray-500 mb-1">Half Days</p>
                                                <p class="text-lg font-medium"
                                                    x-text="countAttendanceByStatus('Half Day')"></p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="mt-5 sm:mt-4 sm:flex sm:flex-row-reverse">
                            <button type="button" @click="showAttendanceHistoryModal = false"
                                class="mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-black sm:mt-0 sm:w-auto sm:text-sm">
                                Close
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Profile View -->
            <div x-show="currentView === 'profile'" class="p-6">
                <div class="mb-6">
                    <h1 class="text-3xl font-semibold text-gray-800">
                        Personal Information
                    </h1>
                    <p class="text-gray-500">Your basic personal details</p>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <!-- Personal Information Card -->
                    <div class="bg-white p-6 rounded-md shadow-sm border border-gray-200">
                        <div class="flex items-center mb-6">
                            <div class="w-20 h-20 bg-gray-200 rounded-full mr-4"></div>
                            <div>
                                <h3 class="text-xl font-medium"
                                    x-text="`${userProfile.firstName} ${userProfile.lastName}`"></h3>
                                <p class="text-gray-500" x-text="userProfile.department"></p>
                            </div>
                        </div>

                        <div class="space-y-6" x-show="!editingProfile">
                            <div class="grid grid-cols-2 gap-4">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700">First Name</label>
                                    <div class="mt-1 p-2 bg-gray-50 border border-gray-300 rounded-md"
                                        x-text="userProfile.firstName"></div>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700">Last Name</label>
                                    <div class="mt-1 p-2 bg-gray-50 border border-gray-300 rounded-md"
                                        x-text="userProfile.lastName"></div>
                                </div>
                            </div>

                            <div>
                                <label class="block text-sm font-medium text-gray-700">Email Address</label>
                                <div class="mt-1 flex">
                                    <span
                                        class="inline-flex items-center px-3 rounded-l-md border border-r-0 border-gray-300 bg-gray-50 text-gray-500">@</span>
                                    <div class="flex-1 p-2 bg-gray-50 border border-gray-300 rounded-r-md"
                                        x-text="userProfile.email"></div>
                                </div>
                            </div>

                            <div>
                                <label class="block text-sm font-medium text-gray-700">Phone Number</label>
                                <div class="mt-1 flex">
                                    <span
                                        class="inline-flex items-center px-3 rounded-l-md border border-r-0 border-gray-300 bg-gray-50 text-gray-500">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20"
                                            fill="currentColor">
                                            <path
                                                d="M2 3a1 1 0 011-1h2.153a1 1 0 01.986.836l.74 4.435a1 1 0 01-.54 1.06l-1.548.773a11.037 11.037 0 006.105 6.105l.774-1.548a1 1 0 011.059-.54l4.435.74a1 1 0 01.836.986V17a1 1 0 01-1 1h-2C7.82 18 2 12.18 2 5V3z" />
                                        </svg>
                                    </span>
                                    <div class="flex-1 p-2 bg-gray-50 border border-gray-300 rounded-r-md"
                                        x-text="userProfile.phone"></div>
                                </div>
                            </div>

                            <div>
                                <label class="block text-sm font-medium text-gray-700">Date of Birth</label>
                                <div class="mt-1 flex">
                                    <span
                                        class="inline-flex items-center px-3 rounded-l-md border border-r-0 border-gray-300 bg-gray-50 text-gray-500">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20"
                                            fill="currentColor">
                                            <path fill-rule="evenodd"
                                                d="M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z"
                                                clip-rule="evenodd" />
                                        </svg>
                                    </span>
                                    <div class="flex-1 p-2 bg-gray-50 border border-gray-300 rounded-r-md"
                                        x-text="userProfile.dateOfBirth"></div>
                                </div>
                            </div>
                        </div>

                        <!-- Edit Form -->
                        <div class="space-y-6" x-show="editingProfile">
                            <div class="grid grid-cols-2 gap-4">
                                <div>
                                    <label for="editFirstName" class="block text-sm font-medium text-gray-700">First
                                        Name</label>
                                    <input type="text" id="editFirstName" x-model="editProfileData.firstName"
                                        class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-black focus:border-black sm:text-sm" />
                                </div>
                                <div>
                                    <label for="editLastName" class="block text-sm font-medium text-gray-700">Last
                                        Name</label>
                                    <input type="text" id="editLastName" x-model="editProfileData.lastName"
                                        class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-black focus:border-black sm:text-sm" />
                                </div>
                            </div>

                            <div>
                                <label for="editEmail" class="block text-sm font-medium text-gray-700">Email
                                    Address</label>
                                <div class="mt-1 flex rounded-md shadow-sm">
                                    <span
                                        class="inline-flex items-center px-3 rounded-l-md border border-r-0 border-gray-300 bg-gray-50 text-gray-500">@</span>
                                    <input type="email" id="editEmail" x-model="editProfileData.email"
                                        class="block w-full px-3 py-2 border border-gray-300 rounded-none rounded-r-md shadow-sm focus:outline-none focus:ring-black focus:border-black sm:text-sm" />
                                </div>
                            </div>

                            <div>
                                <label for="editPhone" class="block text-sm font-medium text-gray-700">Phone
                                    Number</label>
                                <div class="mt-1 flex rounded-md shadow-sm">
                                    <span
                                        class="inline-flex items-center px-3 rounded-l-md border border-r-0 border-gray-300 bg-gray-50 text-gray-500">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20"
                                            fill="currentColor">
                                            <path
                                                d="M2 3a1 1 0 011-1h2.153a1 1 0 01.986.836l.74 4.435a1 1 0 01-.54 1.06l-1.548.773a11.037 11.037 0 006.105 6.105l.774-1.548a1 1 0 011.059-.54l4.435.74a1 1 0 01.836.986V17a1 1 0 01-1 1h-2C7.82 18 2 12.18 2 5V3z" />
                                        </svg>
                                    </span>
                                    <input type="tel" id="editPhone" x-model="editProfileData.phone"
                                        class="block w-full px-3 py-2 border border-gray-300 rounded-none rounded-r-md shadow-sm focus:outline-none focus:ring-black focus:border-black sm:text-sm" />
                                </div>
                            </div>

                            <div>
                                <label for="editDateOfBirth" class="block text-sm font-medium text-gray-700">Date of
                                    Birth</label>
                                <div class="mt-1 flex rounded-md shadow-sm">
                                    <span
                                        class="inline-flex items-center px-3 rounded-l-md border border-r-0 border-gray-300 bg-gray-50 text-gray-500">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20"
                                            fill="currentColor">
                                            <path fill-rule="evenodd"
                                                d="M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z"
                                                clip-rule="evenodd" />
                                        </svg>
                                    </span>
                                    <input type="text" id="editDateOfBirth" x-model="editProfileData.dateOfBirth"
                                        class="block w-full px-3 py-2 border border-gray-300 rounded-none rounded-r-md shadow-sm focus:outline-none focus:ring-black focus:border-black sm:text-sm" />
                                </div>
                            </div>

                            <div class="flex justify-end space-x-3">
                                <button type="button" @click="cancelEditProfile(); cancelEditAddress"
                                    class="bg-white py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-black">
                                    Cancel
                                </button>
                                <button type="button" @click="saveProfile(); saveAddress()"
                                    class="inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-black hover:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-black">
                                    Save
                                </button>
                            </div>
                        </div>

                        <div class="flex justify-end" x-show="!editingProfile">
                            <button @click="startEditProfile(); startEditAddress()"
                                class="mt-5 inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-black hover:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-black">
                                Edit
                            </button>
                        </div>
                    </div>

                    <!-- Contact & Address Card -->
                    <div class="bg-white p-6 rounded-md shadow-sm border border-gray-200">
                        <div class="flex justify-between items-center mb-4">
                            <div>
                                <h2 class="text-xl font-semibold mb-1">Contact & Address</h2>
                                <p class="text-gray-500">
                                    Your contact information and address
                                </p>
                            </div>
                            <div x-show="!editingAddress"></div>
                        </div>

                        <!-- View Mode -->
                        <div class="space-y-6" x-show="!editingAddress">
                            <div>
                                <label class="block text-sm font-medium text-gray-700">Street Address</label>
                                <div class="mt-1 flex">
                                    <span
                                        class="inline-flex items-center px-3 rounded-l-md border border-r-0 border-gray-300 bg-gray-50 text-gray-500">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20"
                                            fill="currentColor">
                                            <path fill-rule="evenodd"
                                                d="M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z"
                                                clip-rule="evenodd" />
                                        </svg>
                                    </span>
                                    <div class="flex-1 p-2 bg-gray-50 border border-gray-300 rounded-r-md"
                                        x-text="userProfile.address.street"></div>
                                </div>
                            </div>

                            <div class="grid grid-cols-2 gap-4">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700">City</label>
                                    <div class="mt-1 p-2 bg-gray-50 border border-gray-300 rounded-md"
                                        x-text="userProfile.address.city"></div>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700">State</label>
                                    <div class="mt-1 p-2 bg-gray-50 border border-gray-300 rounded-md"
                                        x-text="userProfile.address.state"></div>
                                </div>
                            </div>

                            <div class="grid grid-cols-2 gap-4">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700">ZIP Code</label>
                                    <div class="mt-1 p-2 bg-gray-50 border border-gray-300 rounded-md"
                                        x-text="userProfile.address.zipCode"></div>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700">Country</label>
                                    <div class="mt-1 p-2 bg-gray-50 border border-gray-300 rounded-md"
                                        x-text="userProfile.address.country"></div>
                                </div>
                            </div>

                            <div>
                                <label class="block text-sm font-medium text-gray-700">Emergency Contact</label>
                                <div class="mt-1 p-2 bg-gray-50 border border-gray-300 rounded-md"
                                    x-text="userProfile.emergencyContact"></div>
                            </div>
                        </div>

                        <!-- Edit Mode -->
                        <div class="space-y-6" x-show="editingAddress">
                            <div>
                                <label for="editStreet" class="block text-sm font-medium text-gray-700">Street
                                    Address</label>
                                <input type="text" id="editStreet" x-model="editProfileData.address.street"
                                    class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-black focus:border-black sm:text-sm" />
                            </div>

                            <div class="grid grid-cols-2 gap-4">
                                <div>
                                    <label for="editCity" class="block text-sm font-medium text-gray-700">City</label>
                                    <input type="text" id="editCity" x-model="editProfileData.address.city"
                                        class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-black focus:border-black sm:text-sm" />
                                </div>
                                <div>
                                    <label for="editState" class="block text-sm font-medium text-gray-700">State</label>
                                    <input type="text" id="editState" x-model="editProfileData.address.state"
                                        class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-black focus:border-black sm:text-sm" />
                                </div>
                            </div>

                            <div class="grid grid-cols-2 gap-4">
                                <div>
                                    <label for="editZipCode" class="block text-sm font-medium text-gray-700">ZIP
                                        Code</label>
                                    <input type="text" id="editZipCode" x-model="editProfileData.address.zipCode"
                                        class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-black focus:border-black sm:text-sm" />
                                </div>
                                <div>
                                    <label for="editCountry"
                                        class="block text-sm font-medium text-gray-700">Country</label>
                                    <input type="text" id="editCountry" x-model="editProfileData.address.country"
                                        class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-black focus:border-black sm:text-sm" />
                                </div>
                            </div>

                            <div>
                                <label for="editEmergencyContact"
                                    class="block text-sm font-medium text-gray-700">Emergency Contact</label>
                                <input type="text" id="editEmergencyContact" x-model="editProfileData.emergencyContact"
                                    placeholder="Name (Relationship) - Phone Number"
                                    class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-black focus:border-black sm:text-sm" />
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Add Employee View -->
            <div x-show="currentView === 'addEmployee'" class="p-6">
                <div class="mb-6">
                    <h1 class="text-3xl font-semibold text-gray-800"
                        x-text="editingEmployeeIndex !== null ? 'Edit Employee' : 'Add New Employee'"></h1>
                    <p class="text-gray-500">
                        Create a new employee record in the system.
                    </p>
                </div>

                <div class="bg-white p-6 rounded-md shadow-sm border border-gray-200">
                    <form @submit.prevent="submitNewEmployee" class="space-y-6">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                                <label for="firstName" class="block text-sm font-medium text-gray-700">First
                                    Name</label>
                                <input type="text" id="firstName" x-model="newEmployee.firstName"
                                    placeholder="First Name"
                                    class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-black focus:border-black sm:text-sm"
                                    required />
                            </div>

                            <div>
                                <label for="lastName" class="block text-sm font-medium text-gray-700">Last Name</label>
                                <input type="text" id="lastName" x-model="newEmployee.lastName" placeholder="Last Name"
                                    class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-black focus:border-black sm:text-sm"
                                    required />
                            </div>
                        </div>

                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                                <label for="email" class="block text-sm font-medium text-gray-700">Email</label>
                                <input type="email" id="email" x-model="newEmployee.email"
                                    placeholder="user@company.com"
                                    class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-black focus:border-black sm:text-sm"
                                    required />
                            </div>

                            <div>
                                <label for="phone" class="block text-sm font-medium text-gray-700">Phone Number</label>
                                <input type="tel" id="phone" x-model="newEmployee.phone" placeholder="(123) 456-7890"
                                    class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-black focus:border-black sm:text-sm"
                                    required />
                            </div>
                        </div>

                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                                <label for="department"
                                    class="block text-sm font-medium text-gray-700">Department</label>
                                <div class="relative mt-1">
                                    <select id="department" x-model="newEmployee.department"
                                        class="block w-full pl-3 pr-10 py-2 text-base border border-gray-300 focus:outline-none focus:ring-black focus:border-black sm:text-sm rounded-md appearance-none"
                                        required>
                                        <option value="" selected disabled>
                                            Select a department
                                        </option>
                                        <option value="Engineering">Engineering</option>
                                        <option value="Marketing">Marketing</option>
                                        <option value="Sales">Sales</option>
                                        <option value="Product">Product</option>
                                        <option value="HR">HR</option>
                                        <option value="Finance">Finance</option>
                                        <option value="Operations">Operations</option>
                                    </select>
                                    <div class="absolute inset-y-0 right-0 flex items-center px-2 pointer-events-none">
                                        <svg class="h-5 w-5 text-gray-400" xmlns="http://www.w3.org/2000/svg"
                                            viewBox="0 0 20 20" fill="currentColor">
                                            <path fill-rule="evenodd"
                                                d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z"
                                                clip-rule="evenodd" />
                                        </svg>
                                    </div>
                                </div>
                            </div>

                            <div>
                                <label for="position" class="block text-sm font-medium text-gray-700">Position</label>
                                <input type="text" id="position" x-model="newEmployee.position"
                                    placeholder="Your Position"
                                    class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-black focus:border-black sm:text-sm"
                                    required />
                            </div>
                        </div>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                                <label for="startDate" class="block text-sm font-medium text-gray-700">Start
                                    Date</label>
                                <div
                                    class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-black focus:border-black sm:text-sm">
                                    <input type="date" id="startDate" x-model="newEmployee.startDate" required />
                                </div>
                            </div>
                            <div></div>
                        </div>

                        <div class="space-y-6">
                            <div>
                                <label for="street" class="block text-sm font-medium text-gray-700">Street
                                    Address</label>
                                <input type="text" id="street" x-model="newEmployee.address.street"
                                    placeholder="Your Street Address"
                                    class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-black focus:border-black sm:text-sm"
                                    required />
                            </div>

                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                <div>
                                    <label for="city" class="block text-sm font-medium text-gray-700">City</label>
                                    <input type="text" id="city" x-model="newEmployee.address.city"
                                        placeholder="Your City"
                                        class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-black focus:border-black sm:text-sm"
                                        required />
                                </div>
                                <div>
                                    <label for="state" class="block text-sm font-medium text-gray-700">State</label>
                                    <input type="text" id="state" x-model="newEmployee.address.state"
                                        placeholder="Your State"
                                        class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-black focus:border-black sm:text-sm"
                                        required />
                                </div>
                            </div>

                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                <div>
                                    <label for="zipCode" class="block text-sm font-medium text-gray-700">ZIP
                                        Code</label>
                                    <input type="number" id="zipCode" x-model="newEmployee.address.zipCode"
                                        placeholder="Your ZIP Code"
                                        class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-black focus:border-black sm:text-sm"
                                        required />
                                </div>
                                <div>
                                    <label for="country" class="block text-sm font-medium text-gray-700">Country</label>
                                    <input type="text" id="country" x-model="newEmployee.address.country"
                                        placeholder="Your Country"
                                        class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-black focus:border-black sm:text-sm"
                                        required />
                                </div>
                            </div>

                            <div>
                                <label for="emergencyContact" class="block text-sm font-medium text-gray-700">Emergency
                                    Contact</label>
                                <input type="text" id="emergencyContact" x-model="newEmployee.emergencyContact"
                                    placeholder="Name (Relationship) - Phone Number"
                                    class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-black focus:border-black sm:text-sm"
                                    required />
                            </div>
                        </div>

                        <div>
                            <button type="submit"
                                class="inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-black hover:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-black"
                                x-text="editingEmployeeIndex !== null ? 'Update Employee' : 'Add Employee'"></button>
                        </div>
                    </form>
                </div>
            </div>

            <!-- All Employees View -->
            <div x-show="currentView === 'allEmployees'" class="p-6">
                <div class="flex justify-between items-center mb-6">
                    <div>
                        <h1 class="text-3xl font-semibold text-gray-800">Employees</h1>
                        <p class="text-gray-500">
                            Manage your employee records and information.
                        </p>
                    </div>
                    <button @click="currentView = 'addEmployee'" class="bg-black text-white px-4 py-2 rounded-md">
                        Add Employee
                    </button>
                </div>

                <div class="flex justify-between mb-4">
                    <div class="relative w-96">
                        <input type="text" placeholder="Search employees..." x-model="employeeSearch"
                            class="w-full pl-3 pr-10 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-black focus:border-black" />
                    </div>
                    <div class="relative">
                        <button @click="sortMenuOpen = !sortMenuOpen"
                            class="flex items-center space-x-1 border border-gray-300 rounded-md px-3 py-2 bg-white">
                            <span x-text="getSortLabelEmployee()"></span>
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 20 20"
                                fill="currentColor">
                                <path fill-rule="evenodd"
                                    d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z"
                                    clip-rule="evenodd" />
                            </svg>
                        </button>
                        <!-- Sort Dropdown Menu -->
                        <div x-show="sortMenuOpen" @click.away="sortMenuOpen = false"
                            class="absolute right-0 z-20 mt-1 w-48 bg-white rounded-md shadow-lg border border-gray-200">
                            <div class="py-1">
                                <button @click="setEmployeeSort('name-asc'); sortMenuOpen = false"
                                    class="block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"
                                    :class="{'bg-gray-100': employeeSortType === 'name-asc'}">
                                    Sort by Name (A-Z)
                                </button>
                                <button @click="setEmployeeSort('name-desc'); sortMenuOpen = false"
                                    class="block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"
                                    :class="{'bg-gray-100': employeeSortType === 'name-desc'}">
                                    Sort by Name (Z-A)
                                </button>
                                <button @click="setEmployeeSort('id'); sortMenuOpen = false"
                                    class="block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"
                                    :class="{'bg-gray-100': employeeSortType === 'id'}">
                                    Sort by Employee ID
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="bg-white shadow-sm border border-gray-200 overflow-visible">
                    <table class="min-w-full divide-y divide-gray-200">
                        <thead class="bg-gray-50">
                            <tr>
                                <th scope="col" class="px-3 py-3 text-left">
                                    <input type="checkbox"
                                        class="rounded border-gray-300 text-black focus:ring-black" />
                                </th>
                                <th scope="col"
                                    class="px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                    Employee ID
                                </th>
                                <th scope="col"
                                    class="px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                    Name
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 inline-block ml-1"
                                        viewBox="0 0 20 20" fill="currentColor">
                                        <path fill-rule="evenodd"
                                            d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z"
                                            clip-rule="evenodd" />
                                    </svg>
                                </th>
                                <th scope="col"
                                    class="px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                    Email
                                </th>
                                <th scope="col"
                                    class="px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                    Department
                                </th>
                                <th scope="col"
                                    class="px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                    Position
                                </th>
                                <th scope="col"
                                    class="px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                    Status
                                </th>
                                <th scope="col"
                                    class="px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-20">
                                </th>
                            </tr>
                        </thead>
                        <tbody class="bg-white divide-y divide-gray-200">
                            <template x-for="(employee, index) in paginatedEmployees" :key="index">
                                <tr>
                                    <td class="px-3 py-4 whitespace-nowrap">
                                        <input type="checkbox"
                                            class="rounded border-gray-300 text-black focus:ring-black" />
                                    </td>
                                    <td class="px-3 py-4 whitespace-nowrap text-sm text-gray-500" x-text="employee.id">
                                    </td>
                                    <td class="px-3 py-4 whitespace-nowrap text-sm font-medium text-gray-900">
                                        <span x-text="`${employee.firstName} ${employee.lastName}`"></span>
                                    </td>
                                    <td class="px-3 py-4 whitespace-nowrap text-sm text-gray-500"
                                        x-text="employee.email"></td>
                                    <td class="px-3 py-4 whitespace-nowrap text-sm text-gray-500"
                                        x-text="employee.department"></td>
                                    <td class="px-3 py-4 whitespace-nowrap text-sm text-gray-500"
                                        x-text="employee.position"></td>
                                    <td class="px-3 py-4 whitespace-nowrap">
                                        <span class="px-2 py-1 text-xs rounded-full" :class="{
                'bg-yellow-100 text-yellow-800': employee.status === 'On Leave',
                'bg-gray-100 text-gray-800': employee.status === 'Inactive',
                'bg-black text-white': employee.status === 'Active'
            }" x-text="employee.status">
                                        </span>
                                    </td>
                                    <td class="px-3 py-4 whitespace-nowrap text-sm text-gray-500">
                                        <div class="relative flex justify-center">
                                            <button @click="toggleEmployeeMenu(index)"
                                                class="text-gray-400 hover:text-gray-600">
                                                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5"
                                                    viewBox="0 0 20 20" fill="currentColor">
                                                    <path
                                                        d="M6 10a2 2 0 11-4 0 2 2 0 014 0zM12 10a2 2 0 11-4 0 2 2 0 014 0zM16 12a2 2 0 100-4 2 2 0 000 4z" />
                                                </svg>
                                            </button>
                                            <div x-show="employee.showMenu" @click.away="employee.showMenu = false"
                                                class="absolute right-0 top-0 mt-8 w-48 bg-white rounded-md shadow-lg z-10 border border-gray-200"
                                                style="min-width: 12rem">
                                                <div class="py-1">
                                                    <button @click="editEmployee(index)"
                                                        class="block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">
                                                        Edit
                                                    </button>
                                                    <button @click="changeEmployeeStatus(index, 'Active')"
                                                        class="block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">
                                                        Set as Active
                                                    </button>
                                                    <button @click="changeEmployeeStatus(index, 'On Leave')"
                                                        class="block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">
                                                        Set as On Leave
                                                    </button>
                                                    <button @click="changeEmployeeStatus(index, 'Inactive')"
                                                        class="block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">
                                                        Set as Inactive
                                                    </button>
                                                    <button @click="deleteEmployee(index)"
                                                        class="block w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-gray-100">
                                                        Delete
                                                    </button>
                                                </div>
                                            </div>
                                        </div>
                                    </td>
                                </tr>
                            </template>
                            <tr x-show="sortedEmployees.length === 0">
                                <td colspan="8" class="px-3 py-4 text-center text-sm text-gray-500">
                                    No employees found. Add your first employee.
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <div class="flex justify-between items-center mt-4 text-sm text-gray-500">
                    <div x-text="filteredEmployees.length === employees.length ? 
    `${sortedEmployees.length} employee(s) in the system.` : 
    `${sortedEmployees.length} of ${employees.length} employee(s) shown.`"></div>
                    <div class="flex space-x-2">
                        <button @click="prevEmployeePage()" :disabled="employeePage === 1"
                            :class="{'opacity-50 cursor-not-allowed': employeePage === 1}"
                            class="px-3 py-1 border border-gray-300 rounded-md bg-white">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 24 24" fill="none"
                                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <polyline points="15 18 9 12 15 6"></polyline>
                            </svg>
                        </button>
                        <button @click="nextEmployeePage()"
                            :disabled="employeePage >= Math.ceil(sortedEmployees.length / employeesPerPage)"
                            :class="{'opacity-50 cursor-not-allowed': employeePage >= Math.ceil(sortedEmployees.length / employeesPerPage)}"
                            class="px-3 py-1 border border-gray-300 rounded-md bg-white">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 24 24" fill="none"
                                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <polyline points="9 18 15 12 9 6"></polyline>
                            </svg>
                        </button>
                    </div>
                </div>
            </div>

            <!-- All Requests View -->
            <div x-show="currentView === 'allRequests'" class="p-6">
                <div class="mb-6">
                    <h1 class="text-3xl font-semibold text-gray-800">
                        Leave Management
                    </h1>
                    <p class="text-gray-500">
                        Track and manage employee leave requests.
                    </p>
                </div>

                <div class="flex justify-between mb-6">
                    <div class="relative w-full max-w-md">
                        <input type="text" placeholder="Search Leave Requests..." x-model="leaveRequestSearch"
                            class="w-full pl-3 pr-10 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-black focus:border-black" />
                    </div>
                    <div class="relative">
                        <button @click="sortMenuOpen = !sortMenuOpen"
                            class="flex items-center space-x-1 border border-gray-300 rounded-md px-3 py-2 bg-white">
                            <span x-text="getSortLabelLeaveRequest()"></span>
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 20 20"
                                fill="currentColor">
                                <path fill-rule="evenodd"
                                    d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z"
                                    clip-rule="evenodd" />
                            </svg>
                        </button>
                        <!-- Sort Dropdown Menu -->
                        <div x-show="sortMenuOpen" @click.away="sortMenuOpen = false"
                            class="absolute right-0 z-20 mt-1 w-48 bg-white rounded-md shadow-lg border border-gray-200">
                            <div class="py-1">
                                <button @click="setLeaveRequestSort('name-asc'); sortMenuOpen = false"
                                    class="block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"
                                    :class="{'bg-gray-100': leaveRequestSortType === 'name-asc'}">
                                    Approve
                                </button>
                                <button @click="setLeaveRequestSort('name-desc'); sortMenuOpen = false"
                                    class="block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"
                                    :class="{'bg-gray-100': leaveRequestSortType === 'name-desc'}">
                                    Pending
                                </button>
                                <button @click="setLeaveRequestSort('id'); sortMenuOpen = false"
                                    class="block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"
                                    :class="{'bg-gray-100': leaveRequestSortType === 'id'}">
                                    Rejected
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="bg-white shadow-sm border border-gray-200 overflow-visible">
                    <table class="min-w-full divide-y divide-gray-200">
                        <thead class="bg-gray-50">
                            <tr>
                                <th scope="col"
                                    class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                    Request ID
                                </th>
                                <th scope="col"
                                    class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                    Employee
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 inline-block ml-1"
                                        viewBox="0 0 20 20" fill="currentColor">
                                        <path fill-rule="evenodd"
                                            d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z"
                                            clip-rule="evenodd" />
                                    </svg>
                                </th>
                                <th scope="col"
                                    class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                    Leave Type
                                </th>
                                <th scope="col"
                                    class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                    Start Date
                                </th>
                                <th scope="col"
                                    class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                    End Date
                                </th>
                                <th scope="col"
                                    class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                    Days
                                </th>
                                <th scope="col"
                                    class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                    Status
                                </th>
                                <th scope="col"
                                    class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                </th>
                            </tr>
                        </thead>
                        <tbody class="bg-white divide-y divide-gray-200">
                            <template x-for="(request, index) in paginatedLeaveRequests" :key="index">

                                <tr>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500"
                                        x-text="request.id || ('LEA' + String(index + 1).padStart(3, '0'))"></td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"
                                        x-text="request.employee"></td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500" x-text="request.type">
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500"
                                        x-text="request.startDate"></td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500"
                                        x-text="request.endDate"></td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500" x-text="request.days">
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <span :class="{
                        'px-2 py-1 text-xs rounded-full bg-yellow-100 text-yellow-800': request.status === 'Pending',
                        'px-2 py-1 text-xs rounded-full bg-black text-white': request.status === 'Approved',
                        'px-2 py-1 text-xs rounded-full bg-gray-100 text-gray-800': request.status === 'Rejected'
                        }" x-text="request.status">
                                        </span>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                                        <div class="relative">
                                            <button @click="toggleLeaveRequestMenu(index)"
                                                class="text-gray-400 hover:text-gray-600">
                                                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5"
                                                    viewBox="0 0 20 20" fill="currentColor">
                                                    <path
                                                        d="M6 10a2 2 0 11-4 0 2 2 0 014 0zM12 10a2 2 0 11-4 0 2 2 0 014 0zM16 12a2 2 0 100-4 2 2 0 000 4z" />
                                                </svg>
                                            </button>
                                            <!-- Dropdown Menu -->
                                            <div x-show="leaveRequestMenuOpen === index"
                                                @click.away="leaveRequestMenuOpen = null"
                                                class="absolute right-0 z-20 mt-2 w-48 bg-white rounded-md shadow-lg border border-gray-200">
                                                <div class="py-1">
                                                    <button
                                                        @click="viewLeaveRequestDetails(request); leaveRequestMenuOpen = null"
                                                        class="block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">
                                                        View Details
                                                    </button>
                                                    <button x-show="request.status === 'Pending'"
                                                        @click="approveLeaveRequest(index); leaveRequestMenuOpen = null"
                                                        class="block w-full text-left px-4 py-2 text-sm text-green-600 hover:bg-gray-100">
                                                        Approve
                                                    </button>
                                                    <button x-show="request.status === 'Pending'"
                                                        @click="rejectLeaveRequest(index); leaveRequestMenuOpen = null"
                                                        class="block w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-gray-100">
                                                        Reject
                                                    </button>
                                                </div>
                                            </div>
                                        </div>
                                    </td>
                                </tr>
                            </template>
                            <tr x-show="leaveRequests.length === 0">
                                <td colspan="8" class="px-6 py-4 text-center text-sm text-gray-500">
                                    No leave requests found
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <div class="flex justify-between items-center mt-4 text-sm text-gray-500">
                    <div x-text="filteredLeaveRequests.length === leaveRequests.length ? 
            `${sortedLeaveRequests.length} leave request(s) in the system.` : 
            `${sortedLeaveRequests.length} of ${leaveRequests.length} leave request(s) shown.`"></div>
                    <div class="flex space-x-2">
                        <button @click="prevLeaveRequestPage()" :disabled="leaveRequestPage===1"
                            :class="{'opacity-50 cursor-not-allowed': leaveRequestPage === 1}"
                            class="px-3 py-1 border border-gray-300 rounded-md bg-white">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 24 24" fill="none"
                                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <polyline points="15 18 9 12 15 6"></polyline>
                            </svg>
                        </button>
                        <button @click="nextLeaveRequestPage()"
                            :disabled="leaveRequestPage >= Math.ceil(sortedLeaveRequests.length / leaveRequestsPerPage)"
                            :class="{'opacity-50 cursor-not-allowed': leaveRequestPage >= Math.ceil(sortedLeaveRequests.length / leaveRequestsPerPage)}"
                            class="px-3 py-1 border border-gray-300 rounded-md bg-white">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 24 24" fill="none"
                                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <polyline points="9 18 15 12 9 6"></polyline>
                            </svg>
                        </button>
                    </div>
                </div>
            </div>

            <!-- New Request Form -->
            <div x-show="currentView === 'newRequest'" class="p-6">
                <div class="flex justify-between items-center mb-6">
                    <div>
                        <h1 class="text-3xl font-semibold text-gray-800">
                            New Leave Request
                        </h1>
                        <p class="text-gray-500">Submit a new leave request</p>
                    </div>
                </div>

                <div class="bg-white p-6 rounded-md shadow-sm border border-gray-200">
                    <form @submit.prevent="submitLeaveRequest" class="space-y-6">
                        <div>
                            <label for="leaveType" class="block text-sm font-medium text-gray-700">Leave Type</label>
                            <div class="relative mt-1">
                                <select id="leaveType" x-model="newRequest.type"
                                    class="mt-1 block w-full pl-3 pr-10 py-2 text-base border border-gray-300 focus:outline-none focus:ring-black focus:border-black sm:text-sm rounded-md appearance-none"
                                    required>
                                    <option value="">Select leave type</option>
                                    <option value="Annual Leave">Annual Leave</option>
                                    <option value="Sick Leave">Sick Leave</option>
                                    <option value="Personal Leave">Personal Leave</option>
                                    <option value="Bereavement">Bereavement</option>
                                    <option value="Other">Other</option>
                                </select>
                                <div class="absolute inset-y-0 right-0 flex items-center px-2 pointer-events-none">
                                    <svg class="h-5 w-5 text-gray-400" xmlns="http://www.w3.org/2000/svg"
                                        viewBox="0 0 20 20" fill="currentColor">
                                        <path fill-rule="evenodd"
                                            d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z"
                                            clip-rule="evenodd" />
                                    </svg>
                                </div>
                            </div>
                        </div>

                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                                <label for="startDate" class="block text-sm font-medium text-gray-700">Start
                                    Date</label>
                                <div
                                    class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-black focus:border-black sm:text-sm">
                                    <input type="date" id="startDate" x-model="newRequest.startDate" required />
                                </div>
                            </div>

                            <div>
                                <label for="endDate" class="block text-sm font-medium text-gray-700">End Date</label>
                                <div
                                    class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-black focus:border-black sm:text-sm">
                                    <input type="date" id="endDate" x-model="newRequest.endDate" required />
                                </div>
                            </div>
                        </div>

                        <div>
                            <label for="reason" class="block text-sm font-medium text-gray-700">Reason</label>
                            <textarea id="reason" x-model="newRequest.reason" rows="3"
                                class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-black focus:border-black sm:text-sm"
                                required></textarea>
                        </div>

                        <div>
                            <label for="contactInfo" class="block text-sm font-medium text-gray-700">Contact Information
                                During Leave</label>
                            <input type="text" id="contactInfo" x-model="newRequest.contactInfo"
                                class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-black focus:border-black sm:text-sm" />
                        </div>

                        <div class="flex justify-end">
                            <button type="button" @click="currentView = 'allRequests'"
                                class="bg-white py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-black">
                                Cancel
                            </button>
                            <button type="submit"
                                class="ml-3 inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-black hover:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-black">
                                Submit Request
                            </button>
                        </div>
                    </form>
                </div>
            </div>

            <!-- View Request Modal -->
            <div x-show="showViewModal" class="fixed z-10 inset-0 overflow-y-auto" aria-labelledby="modal-title"
                role="dialog" aria-modal="true">
                <div class="flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0">
                    <div x-show="showViewModal" x-transition:enter="ease-out duration-300"
                        x-transition:enter-start="opacity-0" x-transition:enter-end="opacity-100"
                        x-transition:leave="ease-in duration-200" x-transition:leave-start="opacity-100"
                        x-transition:leave-end="opacity-0"
                        class="fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity" aria-hidden="true"></div>

                    <span class="hidden sm:inline-block sm:align-middle sm:h-screen" aria-hidden="true">&#8203;</span>

                    <div x-show="showViewModal" x-transition:enter="ease-out duration-300"
                        x-transition:enter-start="opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"
                        x-transition:enter-end="opacity-100 translate-y-0 sm:scale-100"
                        x-transition:leave="ease-in duration-200"
                        x-transition:leave-start="opacity-100 translate-y-0 sm:scale-100"
                        x-transition:leave-end="opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"
                        class="inline-block align-bottom bg-white rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full sm:p-6">
                        <div>
                            <div class="mt-3 text-center sm:mt-0 sm:text-left">
                                <h3 class="text-lg leading-6 font-medium text-gray-900" id="modal-title">
                                    Leave Request Details
                                </h3>
                                <div class="mt-4 space-y-4">
                                    <div class="grid grid-cols-2 gap-4">
                                        <div>
                                            <p class="text-sm font-medium text-gray-500">
                                                Employee
                                            </p>
                                            <p class="mt-1 text-sm text-gray-900" x-text="selectedRequest.employee"></p>
                                        </div>
                                        <div>
                                            <p class="text-sm font-medium text-gray-500">
                                                Leave Type
                                            </p>
                                            <p class="mt-1 text-sm text-gray-900" x-text="selectedRequest.type"></p>
                                        </div>
                                    </div>

                                    <div class="grid grid-cols-2 gap-4">
                                        <div>
                                            <p class="text-sm font-medium text-gray-500">
                                                Start Date
                                            </p>
                                            <p class="mt-1 text-sm text-gray-900" x-text="selectedRequest.startDate">
                                            </p>
                                        </div>
                                        <div>
                                            <p class="text-sm font-medium text-gray-500">
                                                End Date
                                            </p>
                                            <p class="mt-1 text-sm text-gray-900" x-text="selectedRequest.endDate"></p>
                                        </div>
                                    </div>

                                    <div>
                                        <p class="text-sm font-medium text-gray-500">
                                            Total Days
                                        </p>
                                        <p class="mt-1 text-sm text-gray-900" x-text="selectedRequest.days"></p>
                                    </div>

                                    <div>
                                        <p class="text-sm font-medium text-gray-500">Status</p>
                                        <p class="mt-1">
                                            <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full"
                                                :class="{
                            'bg-yellow-100 text-yellow-800': selectedRequest.status === 'Pending',
                            'bg-green-100 text-green-800': selectedRequest.status === 'Approved',
                            'bg-red-100 text-red-800': selectedRequest.status === 'Rejected'
                            }" x-text="selectedRequest.status">
                                            </span>
                                        </p>
                                    </div>

                                    <div>
                                        <p class="text-sm font-medium text-gray-500">Reason</p>
                                        <p class="mt-1 text-sm text-gray-900" x-text="selectedRequest.reason"></p>
                                    </div>

                                    <div>
                                        <p class="text-sm font-medium text-gray-500">
                                            Contact Information
                                        </p>
                                        <p class="mt-1 text-sm text-gray-900"
                                            x-text="selectedRequest.contactInfo || 'Not provided'"></p>
                                    </div>

                                    <div x-show="selectedRequest.status === 'Rejected'">
                                        <p class="text-sm font-medium text-gray-500">
                                            Rejection Reason
                                        </p>
                                        <p class="mt-1 text-sm text-gray-900"
                                            x-text="selectedRequest.rejectionReason || 'No reason provided'"></p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="mt-5 sm:mt-6">
                            <button type="button" @click="showViewModal = false"
                                class="inline-flex justify-center w-full rounded-md border border-transparent shadow-sm px-4 py-2 bg-black text-base font-medium text-white hover:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-black sm:text-sm">
                                Close
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Salary View -->
            <div x-show="currentView === 'salary'" class="p-6">
                <div class="mb-6">
                    <h1 class="text-3xl font-semibold text-gray-800">Salary</h1>
                    <p class="text-gray-500">
                        View and download your salary payment records
                    </p>
                </div>

                <div class="flex justify-between mb-6">
                    <div></div>
                    <div class="flex space-x-4">
                        <div class="relative">
                            <select x-model="selectedYear" @change="filterPaySlips()"
                                class="block w-full pl-3 pr-10 py-2 text-base border border-gray-300 focus:outline-none focus:ring-black focus:border-black sm:text-sm rounded-md appearance-none">
                                <option value="2025">2025</option>
                                <option value="2024">2024</option>
                                <option value="2023">2023</option>
                            </select>
                            <div class="absolute inset-y-0 right-0 flex items-center px-2 pointer-events-none">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-400"
                                    viewBox="0 0 20 20" fill="currentColor">
                                    <path fill-rule="evenodd"
                                        d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z"
                                        clip-rule="evenodd" />
                                </svg>
                            </div>
                        </div>
                        <div class="relative">
                            <input type="text" placeholder="Search pay slips..." x-model="paySlipSearch"
                                @input="filterPaySlips()"
                                class="w-full pl-3 pr-10 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-black focus:border-black" />
                        </div>
                    </div>
                </div>

                <div class="bg-white p-6 rounded-md shadow-sm border border-gray-200">
                    <h2 class="text-xl font-semibold mb-6">
                        Pay Slips for <span x-text="selectedYear"></span>
                    </h2>

                    <div class="overflow-x-auto">
                        <table class="min-w-full divide-y divide-gray-200">
                            <thead class="bg-gray-50">
                                <tr>
                                    <th scope="col"
                                        class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                        Pay Period
                                    </th>
                                    <th scope="col"
                                        class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                        Issue Date
                                    </th>
                                    <th scope="col"
                                        class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                        Net Pay
                                    </th>
                                    <th scope="col"
                                        class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                        Status
                                    </th>
                                    <th scope="col"
                                        class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">
                                    </th>
                                </tr>
                            </thead>
                            <tbody class="bg-white divide-y divide-gray-200">
                                <template x-for="(slip, index) in paginatedPaySlips" :key="index">
                                    <tr>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"
                                            x-text="slip.period"></td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500"
                                            x-text="slip.issueDate"></td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500"
                                            x-text="slip.netPay"></td>
                                        <td class="px-6 py-4 whitespace-nowrap">
                                            <span class="px-2 py-1 text-xs rounded-full bg-green-100 text-green-800"
                                                x-text="slip.status"></span>
                                        </td>
                                        <td
                                            class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium space-x-3">
                                            <button @click="viewPaySlip(slip)"
                                                class="text-gray-600 hover:text-gray-900">
                                                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5"
                                                    viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                                    stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                                    <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
                                                    <circle cx="12" cy="12" r="3"></circle>
                                                </svg>
                                            </button>
                                            <button @click="downloadPaySlip(slip)"
                                                class="text-gray-600 hover:text-gray-900">
                                                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5"
                                                    viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                                    stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                                    <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                                                    <polyline points="7 10 12 15 17 10"></polyline>
                                                    <line x1="12" y1="15" x2="12" y2="3"></line>
                                                </svg>
                                            </button>
                                        </td>
                                    </tr>
                                </template>
                            </tbody>
                        </table>
                    </div>

                    <div class="flex justify-between items-center mt-6 text-sm text-gray-500">
                        <div
                            x-text="`Showing ${Math.min(paySlipPage * paySlipsPerPage, filteredPaySlips.length)} of ${filteredPaySlips.length} pay slips`">
                        </div>
                        <div class="flex space-x-2">
                            <button @click="prevPaySlipPage()" :disabled="paySlipPage === 1"
                                :class="{'opacity-50 cursor-not-allowed': paySlipPage === 1}"
                                class="px-3 py-1 border border-gray-300 rounded-md bg-white">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 24 24" fill="none"
                                    stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                    stroke-linejoin="round">
                                    <polyline points="15 18 9 12 15 6"></polyline>
                                </svg>
                            </button>
                            <button @click="nextPaySlipPage()"
                                :disabled="paySlipPage >= Math.ceil(filteredPaySlips.length / paySlipsPerPage)}"
                                :class="{'opacity-50 cursor-not-allowed': paySlipPage >= Math.ceil(filteredPaySlips.length / paySlipsPerPage)}"
                                class="px-3 py-1 border border-gray-300 rounded-md bg-white">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 24 24" fill="none"
                                    stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                    stroke-linejoin="round">
                                    <polyline points="9 18 15 12 9 6"></polyline>
                                </svg>
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Pay Slip Modal -->
            <div x-show="showPaySlipModal" class="fixed z-10 inset-0 overflow-y-auto"
                aria-labelledby="payslip-modal-title" role="dialog" aria-modal="true">
                <div class="flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0">
                    <div x-show="showPaySlipModal" x-transition:enter="ease-out duration-300"
                        x-transition:enter-start="opacity-0" x-transition:enter-end="opacity-100"
                        x-transition:leave="ease-in duration-200" x-transition:leave-start="opacity-100"
                        x-transition:leave-end="opacity-0"
                        class="fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity" aria-hidden="true"></div>

                    <span class="hidden sm:inline-block sm:align-middle sm:h-screen" aria-hidden="true">&#8203;</span>

                    <div x-show="showPaySlipModal" x-transition:enter="ease-out duration-300"
                        x-transition:enter-start="opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"
                        x-transition:enter-end="opacity-100 translate-y-0 sm:scale-100"
                        x-transition:leave="ease-in duration-200"
                        x-transition:leave-start="opacity-100 translate-y-0 sm:scale-100"
                        x-transition:leave-end="opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"
                        class="inline-block align-bottom bg-white rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full sm:p-6">
                        <div>
                            <div class="mt-3 text-center sm:mt-0 sm:text-left">
                                <h3 class="text-lg leading-6 font-medium text-gray-900" id="payslip-modal-title">
                                    Pay Slip Details
                                </h3>
                                <div class="mt-4 space-y-4">
                                    <div class="grid grid-cols-2 gap-4">
                                        <div>
                                            <p class="text-sm font-medium text-gray-500">
                                                Pay Period
                                            </p>
                                            <p class="mt-1 text-sm text-gray-900" x-text="selectedPaySlip.period"></p>
                                        </div>
                                        <div>
                                            <p class="text-sm font-medium text-gray-500">
                                                Issue Date
                                            </p>
                                            <p class="mt-1 text-sm text-gray-900" x-text="selectedPaySlip.issueDate">
                                            </p>
                                        </div>
                                    </div>

                                    <div class="grid grid-cols-2 gap-4">
                                        <div>
                                            <p class="text-sm font-medium text-gray-500">Net Pay</p>
                                            <p class="mt-1 text-sm font-semibold text-gray-900"
                                                x-text="selectedPaySlip.netPay"></p>
                                        </div>
                                        <div>
                                            <p class="text-sm font-medium text-gray-500">Status</p>
                                            <p class="mt-1">
                                                <span class="px-2 py-1 text-xs rounded-full bg-green-100 text-green-800"
                                                    x-text="selectedPaySlip.status">
                                                </span>
                                            </p>
                                        </div>
                                    </div>

                                    <div>
                                        <p class="text-sm font-medium text-gray-500">Earnings</p>
                                        <div class="mt-2 border-t border-gray-200 pt-2">
                                            <div class="flex justify-between py-1">
                                                <span class="text-sm text-gray-500">Basic Salary</span>
                                                <span class="text-sm text-gray-900">Rp3.000.000</span>
                                            </div>
                                            <div class="flex justify-between py-1">
                                                <span class="text-sm text-gray-500">Allowances</span>
                                                <span class="text-sm text-gray-900">Rp500.000</span>
                                            </div>
                                            <div class="flex justify-between py-1">
                                                <span class="text-sm text-gray-500">Overtime</span>
                                                <span class="text-sm text-gray-900">Rp150.000</span>
                                            </div>
                                        </div>
                                    </div>

                                    <div>
                                        <p class="text-sm font-medium text-gray-500">
                                            Deductions
                                        </p>
                                        <div class="mt-2 border-t border-gray-200 pt-2">
                                            <div class="flex justify-between py-1">
                                                <span class="text-sm text-gray-500">Tax</span>
                                                <span class="text-sm text-gray-900">Rp150.000</span>
                                            </div>
                                            <div class="flex justify-between py-1">
                                                <span class="text-sm text-gray-500">Insurance</span>
                                                <span class="text-sm text-gray-900">Rp50.000</span>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="border-t border-gray-200 pt-4 mt-4">
                                        <div class="flex justify-between">
                                            <span class="font-medium">Total Net Pay</span>
                                            <span class="font-semibold" x-text="selectedPaySlip.netPay"></span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="mt-5 sm:mt-6 flex justify-between">
                            <button type="button" @click="downloadPaySlip(selectedPaySlip)"
                                class="inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-black sm:text-sm">
                                Download PDF
                            </button>
                            <button type="button" @click="showPaySlipModal = false"
                                class="inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-black text-base font-medium text-white hover:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-black sm:text-sm">
                                Close
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Work Hours View -->
            <div x-show="currentView === 'workHours'" class="p-6">
                <div class="mb-6">
                    <h1 class="text-3xl font-semibold text-gray-800">Working Hours</h1>
                    <p class="text-gray-500">Set working hours</p>
                </div>

                <div class="bg-white p-6 rounded-md shadow-sm border border-gray-200">
                    <h2 class="text-lg font-semibold mb-4">Working Hours</h2>

                    <div class="overflow-x-auto">
                        <table class="min-w-full divide-y divide-gray-200">
                            <thead class="bg-gray-50">
                                <tr>
                                    <th scope="col"
                                        class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                        No
                                    </th>
                                    <th scope="col"
                                        class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                        Description
                                    </th>
                                    <th scope="col"
                                        class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                        Start Time
                                    </th>
                                    <th scope="col"
                                        class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                        End Time
                                    </th>
                                    <th scope="col"
                                        class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                        Action
                                    </th>
                                </tr>
                            </thead>
                            <tbody class="bg-white divide-y divide-gray-200">
                                <template x-for="(schedule, index) in workSchedules" :key="index">
                                    <tr>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900"
                                            x-text="index + 1"></td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900"
                                            x-text="schedule.description"></td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900"
                                            x-text="schedule.startTime"></td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900"
                                            x-text="schedule.endTime"></td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">
                                            <button @click="editWorkSchedule(index)"
                                                class="inline-flex items-center px-3 py-1 bg-gray-800 text-white text-sm font-medium rounded-md hover:bg-gray-700">
                                                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-1"
                                                    viewBox="0 0 20 20" fill="currentColor">
                                                    <path
                                                        d="M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z" />
                                                </svg>
                                                Edit
                                            </button>
                                        </td>
                                    </tr>
                                </template>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Work Schedule Edit Modal -->
            <div x-show="showEditWorkScheduleModal" class="fixed z-10 inset-0 overflow-y-auto"
                aria-labelledby="work-schedule-modal-title" role="dialog" aria-modal="true">
                <div class="flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0">
                    <div x-show="showEditWorkScheduleModal" x-transition:enter="ease-out duration-300"
                        x-transition:enter-start="opacity-0" x-transition:enter-end="opacity-100"
                        x-transition:leave="ease-in duration-200" x-transition:leave-start="opacity-100"
                        x-transition:leave-end="opacity-0"
                        class="fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity" aria-hidden="true"></div>

                    <span class="hidden sm:inline-block sm:align-middle sm:h-screen" aria-hidden="true">&#8203;</span>

                    <div x-show="showEditWorkScheduleModal" x-transition:enter="ease-out duration-300"
                        x-transition:enter-start="opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"
                        x-transition:enter-end="opacity-100 translate-y-0 sm:scale-100"
                        x-transition:leave="ease-in duration-200"
                        x-transition:leave-start="opacity-100 translate-y-0 sm:scale-100"
                        x-transition:leave-end="opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"
                        class="inline-block align-bottom bg-white rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full sm:p-6">
                        <div>
                            <div class="mt-3 text-center sm:mt-0 sm:text-left">
                                <h3 class="text-lg leading-6 font-medium text-gray-900" id="work-schedule-modal-title">
                                    Edit Work Schedule
                                </h3>
                                <div class="mt-4">
                                    <form @submit.prevent="saveWorkSchedule">
                                        <div class="space-y-4">
                                            <div>
                                                <label for="scheduleDescription"
                                                    class="block text-sm font-medium text-gray-700">Description</label>
                                                <input type="text" id="scheduleDescription"
                                                    x-model="editingWorkSchedule.description"
                                                    class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-black focus:border-black sm:text-sm"
                                                    required />
                                            </div>

                                            <div class="grid grid-cols-2 gap-4">
                                                <div>
                                                    <label for="scheduleStartTime"
                                                        class="block text-sm font-medium text-gray-700">Start
                                                        Time</label>
                                                    <input type="time" id="scheduleStartTime"
                                                        x-model="editingWorkSchedule.startTime"
                                                        class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-black focus:border-black sm:text-sm"
                                                        required />
                                                </div>
                                                <div>
                                                    <label for="scheduleEndTime"
                                                        class="block text-sm font-medium text-gray-700">End Time</label>
                                                    <input type="time" id="scheduleEndTime"
                                                        x-model="editingWorkSchedule.endTime"
                                                        class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-black focus:border-black sm:text-sm"
                                                        required />
                                                </div>
                                            </div>
                                        </div>

                                        <div class="mt-5 sm:mt-6 flex justify-end space-x-3">
                                            <button type="button" @click="showEditWorkScheduleModal = false"
                                                class="inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-black sm:text-sm">
                                                Cancel
                                            </button>
                                            <button type="submit"
                                                class="inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-black text-base font-medium text-white hover:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-black sm:text-sm">
                                                Save
                                            </button>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Reports View -->
            <div x-show="currentView === 'reports'" class="p-6">
                <div class="mb-6">
                    <h1 class="text-3xl font-semibold text-gray-800">
                        Employee Attendance Report
                    </h1>
                    <p class="text-gray-500">View Total Attendance of All Employees</p>
                </div>

                <div class="bg-white p-6 rounded-md shadow-sm border border-gray-200">
                    <div class="flex justify-between items-center mb-6">
                        <h2 class="text-xl font-semibold">Data Reports</h2>
                        <div class="flex space-x-3">
                            <div class="relative">
                                <select x-model="reportYear" @change="filterReports()"
                                    class="block w-full pl-3 pr-10 py-2 text-base border border-gray-300 focus:outline-none focus:ring-black focus:border-black sm:text-sm rounded-md appearance-none">
                                    <option value="2025">2025</option>
                                    <option value="2024">2024</option>
                                    <option value="2023">2023</option>
                                </select>
                                <div class="absolute inset-y-0 right-0 flex items-center px-2 pointer-events-none">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-400"
                                        viewBox="0 0 20 20" fill="currentColor">
                                        <path fill-rule="evenodd"
                                            d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z"
                                            clip-rule="evenodd" />
                                    </svg>
                                </div>
                            </div>
                            <div class="relative">
                                <select x-model="reportMonth" @change="filterReports()"
                                    class="block w-full pl-3 pr-10 py-2 text-base border border-gray-300 focus:outline-none focus:ring-black focus:border-black sm:text-sm rounded-md appearance-none">
                                    <option value="January">January</option>
                                    <option value="February">February</option>
                                    <option value="March">March</option>
                                    <option value="April">April</option>
                                    <option value="May">May</option>
                                    <option value="June">June</option>
                                    <option value="July">July</option>
                                    <option value="August">August</option>
                                    <option value="September">September</option>
                                    <option value="October">October</option>
                                    <option value="November">November</option>
                                    <option value="December">December</option>
                                </select>
                                <div class="absolute inset-y-0 right-0 flex items-center px-2 pointer-events-none">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-400"
                                        viewBox="0 0 20 20" fill="currentColor">
                                        <path fill-rule="evenodd"
                                            d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z"
                                            clip-rule="evenodd" />
                                    </svg>
                                </div>
                            </div>
                            <div class="relative">
                                <input type="text" placeholder="Search employees..." x-model="reportSearch"
                                    class="w-full pl-3 pr-10 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-black focus:border-black" />
                            </div>
                            <button @click="printReport()"
                                class="inline-flex items-center px-4 py-2 bg-gray-800 text-white text-sm font-medium rounded-md hover:bg-gray-700">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" viewBox="0 0 20 20"
                                    fill="currentColor">
                                    <path fill-rule="evenodd"
                                        d="M5 4v3H4a2 2 0 00-2 2v3a2 2 0 002 2h1v2a2 2 0 002 2h6a2 2 0 002-2v-2h1a2 2 0 002-2V9a2 2 0 00-2-2h-1V4a2 2 0 00-2-2H7a2 2 0 00-2 2zm8 0H7v3h6V4zm0 8H7v4h6v-4z"
                                        clip-rule="evenodd" />
                                </svg>
                                Print Report
                            </button>
                        </div>
                    </div>

                    <div class="overflow-x-auto">
                        <table class="min-w-full divide-y divide-gray-200">
                            <thead class="bg-gray-50">
                                <tr>
                                    <th scope="col"
                                        class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer"
                                        @click="setReportSort('name-asc')">
                                        <div class="flex items-center">
                                            <span>Name</span>
                                            <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 ml-1"
                                                viewBox="0 0 20 20" fill="currentColor">
                                                <path fill-rule="evenodd"
                                                    d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z"
                                                    clip-rule="evenodd" />
                                            </svg>
                                        </div>
                                    </th>
                                    <th scope="col"
                                        class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                        Work Schedule
                                    </th>
                                    <th scope="col"
                                        class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer"
                                        @click="setReportSort('attendance-high')">
                                        <div class="flex items-center">
                                            <span>Attend</span>
                                            <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 ml-1"
                                                viewBox="0 0 20 20" fill="currentColor">
                                                <path fill-rule="evenodd"
                                                    d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z"
                                                    clip-rule="evenodd" />
                                            </svg>
                                        </div>
                                    </th>
                                    <th scope="col"
                                        class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                        Leave
                                    </th>
                                    <th scope="col"
                                        class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                        No Information
                                    </th>
                                    <th scope="col"
                                        class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                        Total Absent
                                    </th>
                                </tr>
                            </thead>
                            <tbody class="bg-white divide-y divide-gray-200">
                                <template x-for="(record, index) in paginatedAttendanceRecords" :key="index">
                                    <tr>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900"
                                            x-text="record.name"></td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900"
                                            x-text="record.workSchedule"></td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900"
                                            x-text="record.attend"></td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900"
                                            x-text="record.leave"></td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900"
                                            x-text="record.noInformation"></td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900"
                                            x-text="record.totalAbsent"></td>
                                    </tr>
                                </template>
                                <tr x-show="filteredReports.length === 0">
                                    <td colspan="6" class="px-6 py-4 text-center text-sm text-gray-500">
                                        No reports found for the selected criteria.
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <div class="flex justify-between items-center mt-6 text-sm text-gray-500">
                        <div
                            x-text="`Showing ${Math.min(reportPage * reportsPerPage, filteredReports.length)} of ${filteredReports.length} Employee(s)`">
                        </div>
                        <div class="flex space-x-2">
                            <button @click="prevReportPage()" :disabled="reportPage === 1"
                                :class="{'opacity-50 cursor-not-allowed': reportPage === 1}"
                                class="px-3 py-1 border border-gray-300 rounded-md bg-white">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 24 24" fill="none"
                                    stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                    stroke-linejoin="round">
                                    <polyline points="15 18 9 12 15 6"></polyline>
                                </svg>
                            </button>
                            <button @click="nextReportPage()"
                                :disabled="reportPage >= Math.ceil(filteredReports.length / reportsPerPage)"
                                :class="{'opacity-50 cursor-not-allowed': reportPage >= Math.ceil(filteredReports.length / reportsPerPage)}"
                                class="px-3 py-1 border border-gray-300 rounded-md bg-white">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 24 24" fill="none"
                                    stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                    stroke-linejoin="round">
                                    <polyline points="9 18 15 12 9 6"></polyline>
                                </svg>
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Calendar View -->
            <div x-show="currentView === 'calendar'" class="p-6">
                <div class="flex justify-between items-center mb-6">
                    <div>
                        <h1 class="text-3xl font-semibold text-gray-800">Calendar</h1>
                        <p class="text-gray-500">Manage your schedule and events</p>
                    </div>
                    <div class="flex space-x-2">
                        <button @click="addNewEvent()"
                            class="bg-black text-white px-4 py-2 rounded-md flex items-center">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-1" viewBox="0 0 24 24" fill="none"
                                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <line x1="12" y1="5" x2="12" y2="19"></line>
                                <line x1="5" y1="12" x2="19" y2="12"></line>
                            </svg>
                            Add Event
                        </button>
                    </div>
                </div>

                <!-- Calendar Controls -->
                <div class="bg-white p-4 rounded-md shadow-sm border border-gray-200 mb-6">
                    <div class="flex justify-between items-center">
                        <div class="flex space-x-2">
                            <button @click="prevMonth()" class="p-2 rounded-md hover:bg-gray-100">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 24 24" fill="none"
                                    stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                    stroke-linejoin="round">
                                    <polyline points="15 18 9 12 15 6"></polyline>
                                </svg>
                            </button>
                            <button @click="nextMonth()" class="p-2 rounded-md hover:bg-gray-100">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 24 24" fill="none"
                                    stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                    stroke-linejoin="round">
                                    <polyline points="9 18 15 12 9 6"></polyline>
                                </svg>
                            </button>
                        </div>
                        <div class="text-xl font-semibold" x-text="monthNames[currentMonth] + ' ' + currentYear"></div>
                        <div class="flex space-x-2">
                            <button @click="setToday()"
                                class="px-3 py-1 text-sm border border-gray-300 rounded-md hover:bg-gray-100">
                                Today
                            </button>
                            <div class="relative">
                                <button @click="viewDropdownOpen = !viewDropdownOpen"
                                    class="px-3 py-1 text-sm border border-gray-300 rounded-md hover:bg-gray-100 flex items-center">
                                    <span x-text="currentView"></span>
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 ml-1" viewBox="0 0 24 24"
                                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                        stroke-linejoin="round">
                                        <polyline points="6 9 12 15 18 9"></polyline>
                                    </svg>
                                </button>
                                <div x-show="viewDropdownOpen" @click.away="viewDropdownOpen = false"
                                    class="absolute right-0 mt-1 w-32 bg-white rounded-md shadow-lg z-10 border border-gray-200">
                                    <div class="py-1">
                                        <button @click="changeView('Month'); viewDropdownOpen = false"
                                            class="block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">
                                            Month
                                        </button>
                                        <button @click="changeView('Week'); viewDropdownOpen = false"
                                            class="block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">
                                            Week
                                        </button>
                                        <button @click="changeView('Day'); viewDropdownOpen = false"
                                            class="block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">
                                            Day
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Month View -->
                <div x-show="calendarView === 'Month'" class="bg-white rounded-md shadow-sm border border-gray-200">
                    <!-- Days of Week Header -->
                    <div class="grid grid-cols-7 border-b border-gray-200">
                        <template x-for="day in dayNames" :key="day">
                            <div class="py-2 text-center text-sm font-medium text-gray-500" x-text="day"></div>
                        </template>
                    </div>

                    <!-- Calendar Grid -->
                    <div class="grid grid-cols-7 grid-rows-6 h-[700px]">
                        <template x-for="(day, index) in calendarDays" :key="index">
                            <div :class="{
                'bg-gray-50': day.isCurrentMonth === false,
                'bg-[#f8f5e4]': day.isToday,
                'border-t': index >= 7,
                'border-l': index % 7 !== 0,
            }" class="min-h-[100px] p-2 border-gray-200 relative">
                                <div class="flex justify-between">
                                    <span :class="{
                    'text-gray-400': day.isCurrentMonth === false,
                    'font-bold': day.isToday
                }" class="text-sm" x-text="day.date"></span>
                                    <button @click="addEventForDate(day)"
                                        class="text-gray-400 hover:text-gray-600 text-xs">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 24 24"
                                            fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                            stroke-linejoin="round">
                                            <line x1="12" y1="5" x2="12" y2="19"></line>
                                            <line x1="5" y1="12" x2="19" y2="12"></line>
                                        </svg>
                                    </button>
                                </div>

                                <!-- Events for this day -->
                                <div class="mt-1 space-y-1 max-h-[80px] overflow-y-auto">
                                    <template x-for="(event, eventIndex) in getEventsForDate(day)" :key="eventIndex">
                                        <div @click="viewEvent(event)" :class="{
                    'bg-black text-white': event.type === 'meeting',
                    'bg-blue-100 text-blue-800': event.type === 'personal',
                    'bg-green-100 text-green-800': event.type === 'holiday',
                    'bg-yellow-100 text-yellow-800': event.type === 'reminder',
                    'bg-red-100 text-red-800': event.type === 'deadline'
                    }" class="px-2 py-1 text-xs rounded-md truncate cursor-pointer" x-text="event.title"></div>
                                    </template>
                                </div>
                            </div>
                        </template>
                    </div>
                </div>

                <!-- Week View -->
                <div x-show="calendarView === 'Week'" class="bg-white rounded-md shadow-sm border border-gray-200">
                    <!-- Time Header -->
                    <div class="grid grid-cols-8 border-b border-gray-200">
                        <div class="py-2 text-center text-sm font-medium text-gray-500 border-r border-gray-200">
                            Time
                        </div>
                        <template x-for="(day, index) in weekDays" :key="index">
                            <div class="py-2 text-center text-sm font-medium text-gray-500">
                                <div x-text="dayNames[day.dayOfWeek]"></div>
                                <div :class="{'font-bold': day.isToday}" x-text="day.date"></div>
                            </div>
                        </template>
                    </div>

                    <!-- Week Grid -->
                    <div class="grid grid-cols-8 h-[700px] overflow-y-auto">
                        <!-- Time Column -->
                        <div class="border-r border-gray-200">
                            <template x-for="hour in 24" :key="hour">
                                <div class="h-20 border-b border-gray-200 px-2 py-1 text-xs text-gray-500"
                                    x-text="formatHour(hour-1)"></div>
                            </template>
                        </div>

                        <!-- Day Columns -->
                        <template x-for="(day, dayIndex) in weekDays" :key="dayIndex">
                            <div class="relative">
                                <!-- Hour cells -->
                                <template x-for="hour in 24" :key="hour">
                                    <div @click="addEventForDateAndHour(day, hour-1)"
                                        class="h-20 border-b border-gray-200 border-l border-gray-200"></div>
                                </template>

                                <!-- Events -->
                                <template x-for="(event, eventIndex) in getEventsForDay(day)" :key="eventIndex">
                                    <div @click="viewEvent(event)"
                                        :style="`top: ${getEventTop(event)}px; height: ${getEventHeight(event)}px;`"
                                        :class="{
                    'bg-black text-white': event.type === 'meeting',
                    'bg-blue-100 text-blue-800': event.type === 'personal',
                    'bg-green-100 text-green-800': event.type === 'holiday',
                    'bg-yellow-100 text-yellow-800': event.type === 'reminder',
                    'bg-red-100 text-red-800': event.type === 'deadline'
                }" class="absolute left-0 right-0 mx-1 px-2 py-1 text-xs rounded-md overflow-hidden cursor-pointer">
                                        <div class="font-medium" x-text="event.title"></div>
                                        <div x-text="formatEventTime(event)"></div>
                                    </div>
                                </template>
                            </div>
                        </template>
                    </div>
                </div>

                <!-- Day View -->
                <div x-show="calendarView === 'Day'" class="bg-white rounded-md shadow-sm border border-gray-200">
                    <!-- Day Header -->
                    <div class="py-3 text-center border-b border-gray-200">
                        <div class="text-lg font-medium"
                            x-text="dayNames[selectedDay.dayOfWeek] + ', ' + monthNames[selectedDay.month] + ' ' + selectedDay.date">
                        </div>
                    </div>

                    <!-- Day Schedule -->
                    <div class="grid grid-cols-[100px_1fr] h-[700px] overflow-y-auto">
                        <!-- Time Column -->
                        <div class="border-r border-gray-200">
                            <template x-for="hour in 24" :key="hour">
                                <div class="h-20 border-b border-gray-200 px-2 py-1 text-xs text-gray-500"
                                    x-text="formatHour(hour-1)"></div>
                            </template>
                        </div>

                        <!-- Events Column -->
                        <div class="relative">
                            <!-- Hour cells -->
                            <template x-for="hour in 24" :key="hour">
                                <div @click="addEventForDateAndHour(selectedDay, hour-1)"
                                    class="h-20 border-b border-gray-200"></div>
                            </template>

                            <!-- Events -->
                            <template x-for="(event, eventIndex) in getEventsForDay(selectedDay)" :key="eventIndex">
                                <div @click="viewEvent(event)"
                                    :style="`top: ${getEventTop(event)}px; height: ${getEventHeight(event)}px;`" :class="{
                'bg-black text-white': event.type === 'meeting',
                'bg-blue-100 text-blue-800': event.type === 'personal',
                'bg-green-100 text-green-800': event.type === 'holiday',
                'bg-yellow-100 text-yellow-800': event.type === 'reminder',
                'bg-red-100 text-red-800': event.type === 'deadline'
                }" class="absolute left-0 right-0 mx-2 px-3 py-1 text-sm rounded-md overflow-hidden cursor-pointer">
                                    <div class="font-medium" x-text="event.title"></div>
                                    <div x-text="formatEventTime(event)"></div>
                                    <div class="mt-1 text-xs" x-text="event.description"></div>
                                </div>
                            </template>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Add/Edit Event Modal -->
            <div x-show="showEventModal" class="fixed z-10 inset-0 overflow-y-auto" aria-labelledby="event-modal-title"
                role="dialog" aria-modal="true">
                <div class="flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0">
                    <div x-show="showEventModal" x-transition:enter="ease-out duration-300"
                        x-transition:enter-start="opacity-0" x-transition:enter-end="opacity-100"
                        x-transition:leave="ease-in duration-200" x-transition:leave-start="opacity-100"
                        x-transition:leave-end="opacity-0"
                        class="fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity" aria-hidden="true"></div>

                    <span class="hidden sm:inline-block sm:align-middle sm:h-screen" aria-hidden="true">&#8203;</span>

                    <div x-show="showEventModal" x-transition:enter="ease-out duration-300"
                        x-transition:enter-start="opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"
                        x-transition:enter-end="opacity-100 translate-y-0 sm:scale-100"
                        x-transition:leave="ease-in duration-200"
                        x-transition:leave-start="opacity-100 translate-y-0 sm:scale-100"
                        x-transition:leave-end="opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"
                        class="inline-block align-bottom bg-white rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full sm:p-6">
                        <div>
                            <div class="mt-3 text-center sm:mt-0 sm:text-left">
                                <h3 class="text-lg leading-6 font-medium text-gray-900" id="event-modal-title"
                                    x-text="editingEvent.id ? 'Edit Event' : 'Add New Event'"></h3>
                                <div class="mt-4">
                                    <form @submit.prevent="saveEvent">
                                        <div class="space-y-4">
                                            <div>
                                                <label for="eventTitle"
                                                    class="block text-sm font-medium text-gray-700">Title</label>
                                                <input type="text" id="eventTitle" x-model="editingEvent.title"
                                                    class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-black focus:border-black sm:text-sm"
                                                    required />
                                            </div>

                                            <div>
                                                <label for="eventType"
                                                    class="block text-sm font-medium text-gray-700">Event Type</label>
                                                <select id="eventType" x-model="editingEvent.type"
                                                    class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-black focus:border-black sm:text-sm"
                                                    required>
                                                    <option value="meeting">Meeting</option>
                                                    <option value="personal">Personal</option>
                                                    <option value="holiday">Holiday</option>
                                                    <option value="reminder">Reminder</option>
                                                    <option value="deadline">Deadline</option>
                                                </select>
                                            </div>

                                            <div class="grid grid-cols-2 gap-4">
                                                <div>
                                                    <label for="eventDate"
                                                        class="block text-sm font-medium text-gray-700">Date</label>
                                                    <input type="date" id="eventDate" x-model="editingEvent.date"
                                                        class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-black focus:border-black sm:text-sm"
                                                        required />
                                                </div>
                                                <div>
                                                    <label for="eventAllDay"
                                                        class="block text-sm font-medium text-gray-700">All Day</label>
                                                    <div class="mt-1 flex items-center">
                                                        <input type="checkbox" id="eventAllDay"
                                                            x-model="editingEvent.allDay"
                                                            class="h-4 w-4 text-black focus:ring-black border-gray-300 rounded" />
                                                        <label for="eventAllDay"
                                                            class="ml-2 block text-sm text-gray-900">All day
                                                            event</label>
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="grid grid-cols-2 gap-4" x-show="!editingEvent.allDay">
                                                <div>
                                                    <label for="eventStartTime"
                                                        class="block text-sm font-medium text-gray-700">Start
                                                        Time</label>
                                                    <input type="time" id="eventStartTime"
                                                        x-model="editingEvent.startTime"
                                                        class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-black focus:border-black sm:text-sm"
                                                        :required="!editingEvent.allDay" />
                                                </div>
                                                <div>
                                                    <label for="eventEndTime"
                                                        class="block text-sm font-medium text-gray-700">End Time</label>
                                                    <input type="time" id="eventEndTime" x-model="editingEvent.endTime"
                                                        class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-black focus:border-black sm:text-sm"
                                                        :required="!editingEvent.allDay" />
                                                </div>
                                            </div>

                                            <div>
                                                <label for="eventDescription"
                                                    class="block text-sm font-medium text-gray-700">Description</label>
                                                <textarea id="eventDescription" x-model="editingEvent.description"
                                                    rows="3"
                                                    class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-black focus:border-black sm:text-sm"></textarea>
                                            </div>
                                        </div>

                                        <div class="mt-5 sm:mt-6 flex justify-between">
                                            <div>
                                                <button x-show="editingEvent.id" type="button" @click="deleteEvent()"
                                                    class="inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:text-sm">
                                                    Delete
                                                </button>
                                            </div>
                                            <div class="flex space-x-3">
                                                <button type="button" @click="showEventModal = false"
                                                    class="inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-black sm:text-sm">
                                                    Cancel
                                                </button>
                                                <button type="submit"
                                                    class="inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-black text-base font-medium text-white hover:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-black sm:text-sm">
                                                    Save
                                                </button>
                                            </div>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- View Event Modal -->
            <div x-show="showViewEventModal" class="fixed z-10 inset-0 overflow-y-auto"
                aria-labelledby="view-event-modal-title" role="dialog" aria-modal="true">
                <div class="flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0">
                    <div x-show="showViewEventModal" x-transition:enter="ease-out duration-300"
                        x-transition:enter-start="opacity-0" x-transition:enter-end="opacity-100"
                        x-transition:leave="ease-in duration-200" x-transition:leave-start="opacity-100"
                        x-transition:leave-end="opacity-0"
                        class="fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity" aria-hidden="true"></div>

                    <span class="hidden sm:inline-block sm:align-middle sm:h-screen" aria-hidden="true">&#8203;</span>

                    <div x-show="showViewEventModal" x-transition:enter="ease-out duration-300"
                        x-transition:enter-start="opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"
                        x-transition:enter-end="opacity-100 translate-y-0 sm:scale-100"
                        x-transition:leave="ease-in duration-200"
                        x-transition:leave-start="opacity-100 translate-y-0 sm:scale-100"
                        x-transition:leave-end="opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"
                        class="inline-block align-bottom bg-white rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full sm:p-6">
                        <div>
                            <div class="mt-3 text-center sm:mt-0 sm:text-left">
                                <h3 class="text-lg leading-6 font-medium text-gray-900" id="view-event-modal-title"
                                    x-text="selectedEvent.title"></h3>
                                <div class="mt-4 space-y-4">
                                    <div class="flex items-center">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-400 mr-2"
                                            viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                                            stroke-linecap="round" stroke-linejoin="round">
                                            <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                                            <line x1="16" y1="2" x2="16" y2="6"></line>
                                            <line x1="8" y1="2" x2="8" y2="6"></line>
                                            <line x1="3" y1="10" x2="21" y2="10"></line>
                                        </svg>
                                        <span x-text="formatEventDate(selectedEvent)"></span>
                                    </div>

                                    <div class="flex items-center" x-show="!selectedEvent.allDay">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-400 mr-2"
                                            viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                                            stroke-linecap="round" stroke-linejoin="round">
                                            <circle cx="12" cy="12" r="10"></circle>
                                            <polyline points="12 6 12 12 16 14"></polyline>
                                        </svg>
                                        <span x-text="formatEventTime(selectedEvent)"></span>
                                    </div>

                                    <div class="flex items-center">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-400 mr-2"
                                            viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                                            stroke-linecap="round" stroke-linejoin="round">
                                            <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                                            <polyline points="14 2 14 8 20 8"></polyline>
                                            <line x1="16" y1="13" x2="8" y2="13"></line>
                                            <line x1="16" y1="17" x2="8" y2="17"></line>
                                            <polyline points="10 9 9 9 8 9"></polyline>
                                        </svg>
                                        <span :class="{
                    'bg-black text-white': selectedEvent.type === 'meeting',
                    'bg-blue-100 text-blue-800': selectedEvent.type === 'personal',
                    'bg-green-100 text-green-800': selectedEvent.type === 'holiday',
                    'bg-yellow-100 text-yellow-800': selectedEvent.type === 'reminder',
                    'bg-red-100 text-red-800': selectedEvent.type === 'deadline'
                    }" class="px-2 py-1 text-xs rounded-full"
                                            x-text="selectedEvent.type.charAt(0).toUpperCase() + selectedEvent.type.slice(1)"></span>
                                    </div>

                                    <div x-show="selectedEvent.description">
                                        <p class="text-sm font-medium text-gray-500">
                                            Description
                                        </p>
                                        <p class="mt-1 text-sm text-gray-900" x-text="selectedEvent.description"></p>
                                    </div>
                                </div>

                                <div class="mt-5 sm:mt-6 flex justify-between">
                                    <button type="button" @click="editEvent(selectedEvent)"
                                        class="inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-black sm:text-sm">
                                        Edit
                                    </button>
                                    <div class="flex space-x-3">
                                        <button type="button" @click="deleteEvent(selectedEvent.id)"
                                            class="inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:text-sm">
                                            Delete
                                        </button>
                                        <button type="button" @click="showViewEventModal = false"
                                            class="inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-black text-base font-medium text-white hover:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-black sm:text-sm">
                                            Close
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener("alpine:init", () => {
            Alpine.data("hrSystem", () => ({
                // HR System Data
                currentView: "dashboard",
                menuOpen: {
                    leave: false,
                    employees: false,
                },
                editingProfile: false,
                editingAddress: false,
                editingEmployeeIndex: null,
                showViewModal: false,
                selectedRequest: {},
                leaveRequestMenuOpen: null,
                sortMenuOpen: false,
                employeeSortType: "name-asc",
                employeeSearch: "",
                employeePage: 1,
                employeesPerPage: 5,
                showPaySlipModal: false,
                selectedPaySlip: {},
                selectedYear: "2025",
                paySlipSearch: "",
                paySlipPage: 1,
                paySlipsPerPage: 5,
                showEditWorkScheduleModal: false,
                employeeChart: null,
                editingWorkSchedule: {
                    description: "",
                    startTime: "",
                    endTime: "",
                },
                editingWorkScheduleIndex: null,
                reportYear: "2025",
                reportMonth: "March",
                reportPage: 1,
                reportsPerPage: 5,

                //Search Leave Request
                leaveRequestSearch: "",
                leaveRequestPage: 1,
                leaveRequestsPerPage: 5,
                leaveRequestSortType: "name-asc",

                // Reports
                filteredReports: [],
                reportSortType: "name-asc",
                reportSearch: "",

                // Calendar Data
                currentMonth: new Date().getMonth(),
                currentYear: new Date().getFullYear(),
                calendarView: "Month",
                viewDropdownOpen: false,
                showEventModal: false,
                showViewEventModal: false,
                selectedEvent: {},
                editingEvent: {
                    id: null,
                    title: "",
                    type: "meeting",
                    date: "",
                    allDay: false,
                    startTime: "",
                    endTime: "",
                    description: "",
                },
                selectedDay: {
                    date: new Date().getDate(),
                    month: new Date().getMonth(),
                    year: new Date().getFullYear(),
                    dayOfWeek: new Date().getDay(),
                },
                events: [{
                        id: 1,
                        title: "Team Meeting",
                        type: "meeting",
                        date: "2025-03-15",
                        allDay: false,
                        startTime: "09:00",
                        endTime: "10:30",
                        description: "Weekly team sync meeting",
                    },
                    {
                        id: 2,
                        title: "Project Deadline",
                        type: "deadline",
                        date: "2025-03-20",
                        allDay: true,
                        startTime: "",
                        endTime: "",
                        description: "Final submission for Q1 project",
                    },
                    {
                        id: 3,
                        title: "Lunch with Client",
                        type: "personal",
                        date: "2025-03-18",
                        allDay: false,
                        startTime: "12:00",
                        endTime: "13:30",
                        description: "Lunch meeting with potential client",
                    },
                    {
                        id: 4,
                        title: "Company Holiday",
                        type: "holiday",
                        date: "2025-03-25",
                        allDay: true,
                        startTime: "",
                        endTime: "",
                        description: "Company-wide holiday",
                    },
                ],
                dayNames: ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"],
                monthNames: [
                    "January",
                    "February",
                    "March",
                    "April",
                    "May",
                    "June",
                    "July",
                    "August",
                    "September",
                    "October",
                    "November",
                    "December",
                ],

                userProfile: {
                    firstName: "John",
                    lastName: "Doe",
                    email: "john.doe@company.com",
                    phone: "(123) 456-7890",
                    dateOfBirth: "1990-01-01",
                    department: "Engineering",
                    position: "Senior Developer",
                    address: {
                        street: "123 Main St",
                        city: "San Francisco",
                        state: "CA",
                        zipCode: "94105",
                        country: "USA",
                    },
                    emergencyContact: "Jane Doe (Wife) - (123) 456-7891",
                },

                editProfileData: {
                    firstName: "",
                    lastName: "",
                    email: "",
                    phone: "",
                    dateOfBirth: "",
                    address: {
                        street: "",
                        city: "",
                        state: "",
                        zipCode: "",
                        country: "",
                    },
                    emergencyContact: "",
                },

                employees: [{
                        id: "EMP001",
                        firstName: "John",
                        lastName: "Doe",
                        email: "john.doe@company.com",
                        phone: "(123) 456-7890",
                        department: "Engineering",
                        position: "Senior Developer",
                        status: "Active",
                        startDate: "2022-01-15",
                        address: {
                            street: "123 Main St",
                            city: "San Francisco",
                            state: "CA",
                            zipCode: "94105",
                            country: "USA",
                        },
                        emergencyContact: "Jane Doe (Wife) - (123) 456-7891",
                        showMenu: false,
                    },
                    {
                        id: "EMP002",
                        firstName: "Jane",
                        lastName: "Smith",
                        email: "jane.smith@company.com",
                        phone: "(123) 456-7892",
                        department: "Marketing",
                        position: "Marketing Manager",
                        status: "Active",
                        startDate: "2022-02-01",
                        address: {
                            street: "456 Market St",
                            city: "San Francisco",
                            state: "CA",
                            zipCode: "94105",
                            country: "USA",
                        },
                        emergencyContact: "John Smith (Husband) - (123) 456-7893",
                        showMenu: false,
                    },
                    {
                        id: "EMP003",
                        firstName: "Robert",
                        lastName: "Johnson",
                        email: "robert.johnson@company.com",
                        phone: "(123) 456-7894",
                        department: "Sales",
                        position: "Sales Representative",
                        status: "On Leave",
                        startDate: "2022-03-15",
                        address: {
                            street: "789 Mission St",
                            city: "San Francisco",
                            state: "CA",
                            zipCode: "94105",
                            country: "USA",
                        },
                        emergencyContact: "Mary Johnson (Wife) - (123) 456-7895",
                        showMenu: false,
                    },
                    {
                        id: "EMP004",
                        firstName: "Emily",
                        lastName: "Davis",
                        email: "emily.davis@company.com",
                        phone: "(123) 456-7896",
                        department: "HR",
                        position: "HR Specialist",
                        status: "Active",
                        startDate: "2023-01-10",
                        address: {
                            street: "101 Howard St",
                            city: "San Francisco",
                            state: "CA",
                            zipCode: "94105",
                            country: "USA",
                        },
                        emergencyContact: "Michael Davis (Husband) - (123) 456-7897",
                        showMenu: false,
                    },
                    {
                        id: "EMP005",
                        firstName: "Michael",
                        lastName: "Wilson",
                        email: "michael.wilson@company.com",
                        phone: "(123) 456-7898",
                        department: "Finance",
                        position: "Financial Analyst",
                        status: "Inactive",
                        startDate: "2022-05-20",
                        address: {
                            street: "555 California St",
                            city: "San Francisco",
                            state: "CA",
                            zipCode: "94105",
                            country: "USA",
                        },
                        emergencyContact: "Sarah Wilson (Wife) - (123) 456-7899",
                        showMenu: false,
                    },
                    {
                        id: "EMP006",
                        firstName: "Cade",
                        lastName: "Johnson",
                        email: "michael.wilson@company.com",
                        phone: "(123) 456-7898",
                        department: "Finance",
                        position: "Financial Analyst",
                        status: "Inactive",
                        startDate: "2022-05-20",
                        address: {
                            street: "555 California St",
                            city: "San Francisco",
                            state: "CA",
                            zipCode: "94105",
                            country: "USA",
                        },
                        emergencyContact: "Sarah Wilson (Wife) - (123) 456-7899",
                        showMenu: false,
                    },
                    {
                        id: "EMP007",
                        firstName: "Cade",
                        lastName: "Johnson",
                        email: "michael.wilson@company.com",
                        phone: "(123) 456-7898",
                        department: "Engineering",
                        position: "Software Engineer",
                        status: "Inactive",
                        startDate: "2022-05-20",
                        address: {
                            street: "555 California St",
                            city: "San Francisco",
                            state: "CA",
                            zipCode: "94105",
                            country: "USA",
                        },
                        emergencyContact: "Sarah Wilson (Wife) - (123) 456-7899",
                        showMenu: false,
                    },
                ],

                newEmployee: {
                    firstName: "",
                    lastName: "",
                    email: "",
                    phone: "",
                    department: "",
                    position: "",
                    status: "Active",
                    startDate: "",
                    address: {
                        street: "",
                        city: "",
                        state: "",
                        zipCode: "",
                        country: "",
                    },
                    emergencyContact: "",
                },

                leaveRequests: [{
                        id: "LEA001",
                        employee: "John Doe",
                        type: "Annual Leave",
                        startDate: "2025-04-10",
                        endDate: "2025-04-15",
                        days: 5,
                        status: "Pending",
                        reason: "Family vacation",
                        contactInfo: "john.doe@personal.com",
                    },
                    {
                        id: "LEA002",
                        employee: "Jane Smith",
                        type: "Sick Leave",
                        startDate: "2025-03-25",
                        endDate: "2025-03-26",
                        days: 2,
                        status: "Approved",
                        reason: "Doctor appointment",
                        contactInfo: "jane.smith@personal.com",
                    },
                    {
                        id: "LEA003",
                        employee: "Robert Johnson",
                        type: "Personal Leave",
                        startDate: "2025-05-05",
                        endDate: "2025-05-07",
                        days: 3,
                        status: "Rejected",
                        reason: "Personal matters",
                        contactInfo: "robert.johnson@personal.com",
                        rejectionReason: "High workload during this period",
                    },
                    {
                        id: "LEA004",
                        employee: "Donald Mickey",
                        type: "Annual Leave",
                        startDate: "2025-05-05",
                        endDate: "2025-05-07",
                        days: 3,
                        status: "Rejected",
                        reason: "Personal matters",
                        contactInfo: "robert.johnson@personal.com",
                        rejectionReason: "High workload during this period",
                    },
                    {
                        id: "LEA005",
                        employee: "Dwayne Johnson",
                        type: "Personal Leave",
                        startDate: "2025-05-05",
                        endDate: "2025-05-07",
                        days: 3,
                        status: "Rejected",
                        reason: "Personal matters",
                        contactInfo: "robert.johnson@personal.com",
                        rejectionReason: "High workload during this period",
                    },
                    {
                        id: "LEA006",
                        employee: "Cade Johnson",
                        type: "Personal Leave",
                        startDate: "2025-05-05",
                        endDate: "2025-05-07",
                        days: 3,
                        status: "Rejected",
                        reason: "Personal matters",
                        contactInfo: "robert.johnson@personal.com",
                        rejectionReason: "High workload during this period",
                    },
                ],

                newRequest: {
                    type: "",
                    startDate: "",
                    endDate: "",
                    days: 1,
                    reason: "",
                    contactInfo: "",
                },

                paySlips: [{
                        period: "March 2025",
                        issueDate: "2025-03-31",
                        netPay: "Rp3.450.000",
                        status: "Paid",
                    },
                    {
                        period: "February 2025",
                        issueDate: "2025-02-28",
                        netPay: "Rp3.450.000",
                        status: "Paid",
                    },
                    {
                        period: "January 2025",
                        issueDate: "2025-01-31",
                        netPay: "Rp3.450.000",
                        status: "Paid",
                    },
                    {
                        period: "December 2024",
                        issueDate: "2024-12-31",
                        netPay: "Rp3.450.000",
                        status: "Paid",
                    },
                    {
                        period: "November 2024",
                        issueDate: "2024-11-30",
                        netPay: "Rp3.450.000",
                        status: "Paid",
                    },
                    {
                        period: "October 2024",
                        issueDate: "2024-10-31",
                        netPay: "Rp3.450.000",
                        status: "Paid",
                    },
                    {
                        period: "September 2024",
                        issueDate: "2024-09-31",
                        netPay: "Rp3.450.000",
                        status: "Paid",
                    },
                    {
                        period: "August 2024",
                        issueDate: "2024-08-31",
                        netPay: "Rp3.450.000",
                        status: "Paid",
                    },
                    {
                        period: "July 2024",
                        issueDate: "2024-07-31",
                        netPay: "Rp3.450.000",
                        status: "Paid",
                    },
                ],

                filteredPaySlips: [],

                workSchedules: [{
                        description: "Regular Work Hours",
                        startTime: "09:00",
                        endTime: "17:00",
                    },
                    {
                        description: "Flexible Work Hours",
                        startTime: "08:00",
                        endTime: "16:00",
                    },
                    {
                        description: "Night Shift",
                        startTime: "22:00",
                        endTime: "06:00",
                    },
                ],

                // EmployeeAttendaceReports
                employeeAttendanceReports: [{
                        no: 1,
                        name: "John Doe",
                        workSchedule: "Regular Work Hours",
                        attend: 20,
                        leave: 2,
                        noInformation: 0,
                        totalAbsent: 2,
                    },
                    {
                        no: 2,
                        name: "Jane Smith",
                        workSchedule: "Regular Work Hours",
                        attend: 22,
                        leave: 0,
                        noInformation: 0,
                        totalAbsent: 0,
                    },
                    {
                        no: 3,
                        name: "Robert Johnson",
                        workSchedule: "Flexible Work Hours",
                        attend: 18,
                        leave: 3,
                        noInformation: 1,
                        totalAbsent: 4,
                    },
                    {
                        no: 4,
                        name: "Emily Davis",
                        workSchedule: "Regular Work Hours",
                        attend: 21,
                        leave: 1,
                        noInformation: 0,
                        totalAbsent: 1,
                    },
                    {
                        no: 5,
                        name: "Michael Wilson",
                        workSchedule: "Night Shift",
                        attend: 19,
                        leave: 2,
                        noInformation: 1,
                        totalAbsent: 3,
                    },
                    {
                        no: 6,
                        name: "Michael Wilson",
                        workSchedule: "Night Shift",
                        attend: 19,
                        leave: 2,
                        noInformation: 1,
                        totalAbsent: 3,
                    },
                ],

                // New Attendance Data
                currentTime: '',
                showAttendanceHistoryModal: false,
                attendanceFilterMonth: 'all',
                attendanceFilterStatus: 'all',
                todayAttendance: {
                    checkIn: null,
                    checkOut: null
                },
                // Second attendanceRecords, kept for attendance tracking
                attendanceRecords: [{
                        date: '2025-03-29',
                        checkIn: '08:55:23',
                        checkOut: '17:05:47',
                        status: 'Present'
                    },
                    {
                        date: '2025-03-28',
                        checkIn: '09:10:15',
                        checkOut: '17:30:22',
                        status: 'Late'
                    },
                    {
                        date: '2025-03-27',
                        checkIn: '08:45:30',
                        checkOut: '16:50:12',
                        status: 'Present'
                    },
                    {
                        date: '2025-03-26',
                        checkIn: '08:50:45',
                        checkOut: '17:15:33',
                        status: 'Present'
                    },
                    {
                        date: '2025-03-25',
                        checkIn: null,
                        checkOut: null,
                        status: 'Absent'
                    },
                    {
                        date: '2025-03-24',
                        checkIn: '08:58:20',
                        checkOut: '13:30:10',
                        status: 'Half Day'
                    },
                    {
                        date: '2025-03-23',
                        checkIn: '08:45:12',
                        checkOut: '17:05:30',
                        status: 'Present'
                    },
                    {
                        date: '2025-03-22',
                        checkIn: '09:15:45',
                        checkOut: '17:20:18',
                        status: 'Late'
                    },
                    {
                        date: '2025-03-21',
                        checkIn: '08:50:33',
                        checkOut: '17:10:25',
                        status: 'Present'
                    },
                    {
                        date: '2025-03-20',
                        checkIn: '08:48:55',
                        checkOut: '17:05:40',
                        status: 'Present'
                    },
                    {
                        date: '2025-03-19',
                        checkIn: '08:55:10',
                        checkOut: '17:15:22',
                        status: 'Present'
                    },
                    {
                        date: '2025-03-18',
                        checkIn: '09:20:05',
                        checkOut: '17:30:15',
                        status: 'Late'
                    },
                    {
                        date: '2025-03-17',
                        checkIn: '08:45:30',
                        checkOut: '17:00:45',
                        status: 'Present'
                    },
                    {
                        date: '2025-03-16',
                        checkIn: null,
                        checkOut: null,
                        status: 'Absent'
                    },
                    {
                        date: '2025-03-15',
                        checkIn: '08:50:20',
                        checkOut: '17:10:35',
                        status: 'Present'
                    }
                ],

                filteredAttendanceRecords: [],

                init() {
                    // Initialize HR System
                    this.filterPaySlips();
                    // Update this reference to use employeeAttendanceReports
                    this.filteredAttendanceRecords = [...this.attendanceRecords];

                    // Initialize Calendar
                    this.setToday();
                    this.generateCalendarDays();
                    this.generateWeekDays();

                    this.initReports();

                    // Initialize Chart
                    this.$nextTick(() => {
                        this.initEmployeeChart();
                    });

                    // Check if there's already an attendance record for today
                    const today = new Date().toISOString().split('T')[0];
                    const todayRecord = this.attendanceRecords.find(record => record.date ===
                    today);

                    if (todayRecord) {
                        this.todayAttendance.checkIn = todayRecord.checkIn;
                        this.todayAttendance.checkOut = todayRecord.checkOut;
                    }
                },

                // Attendance Methods
                startClock() {
                    this.updateClock();
                    setInterval(() => this.updateClock(), 1000);
                },

                updateClock() {
                    const now = new Date();
                    const hours = String(now.getHours()).padStart(2, '0');
                    const minutes = String(now.getMinutes()).padStart(2, '0');
                    const seconds = String(now.getSeconds()).padStart(2, '0');
                    this.currentTime = `${hours}:${minutes}:${seconds}`;
                },

                formatCurrentDate() {
                    const options = {
                        weekday: 'long',
                        year: 'numeric',
                        month: 'long',
                        day: 'numeric'
                    };
                    return new Date().toLocaleDateString('en-US', options);
                },

                formatDateForDisplay(dateString) {
                    const date = new Date(dateString);
                    return date.toLocaleDateString('en-US', {
                        year: 'numeric',
                        month: 'short',
                        day: 'numeric'
                    });
                },

                formatTime(timeString) {
                    if (!timeString) return '-';

                    const [hours, minutes] = timeString.split(':');
                    const h = parseInt(hours) % 12 || 12;
                    const ampm = parseInt(hours) < 12 ? 'AM' : 'PM';
                    return `${h}:${minutes} ${ampm}`;
                },

                calculateDuration(checkIn, checkOut) {
                    if (!checkIn || !checkOut) return '-';

                    const [inHours, inMinutes] = checkIn.split(':');
                    const [outHours, outMinutes] = checkOut.split(':');

                    const inTime = new Date();
                    inTime.setHours(parseInt(inHours), parseInt(inMinutes), 0);

                    const outTime = new Date();
                    outTime.setHours(parseInt(outHours), parseInt(outMinutes), 0);

                    const diffMs = outTime - inTime;
                    const diffHrs = Math.floor(diffMs / (1000 * 60 * 60));
                    const diffMins = Math.floor((diffMs % (1000 * 60 * 60)) / (1000 * 60));

                    return `${diffHrs} hrs ${diffMins} mins`;
                },

                calculateWorkDuration() {
                    return this.calculateDuration(this.todayAttendance.checkIn, this.todayAttendance
                        .checkOut);
                },

                checkIn() {
                    const now = new Date();
                    const hours = String(now.getHours()).padStart(2, '0');
                    const minutes = String(now.getMinutes()).padStart(2, '0');
                    const seconds = String(now.getSeconds()).padStart(2, '0');
                    const timeString = `${hours}:${minutes}:${seconds}`;

                    this.todayAttendance.checkIn = timeString;

                    // Take today's date
                    const today = now.toISOString().split('T')[0];

                    // Search for “Regular Work Hours” schedule
                    const regularWork = this.workSchedules.find(schedule => schedule.description ===
                        "Regular Work Hours");

                    let status = 'Present';

                    if (regularWork) {
                        const regularStartHour = parseInt(regularWork.startTime.split(":")[0]);
                        status = parseInt(hours) >= regularStartHour ? 'Late' : 'Present';
                    }

                    // Check if there is already a record today
                    const existingIndex = this.attendanceRecords.findIndex(record => record.date ===
                        today);

                    if (existingIndex !== -1) {
                        this.attendanceRecords[existingIndex].checkIn = timeString;
                        this.attendanceRecords[existingIndex].status = status;
                    } else {
                        this.attendanceRecords.unshift({
                            date: today,
                            checkIn: timeString,
                            checkOut: null,
                            status: status
                        });
                    }
                },

                checkOut() {
                    const now = new Date();
                    const hours = String(now.getHours()).padStart(2, '0');
                    const minutes = String(now.getMinutes()).padStart(2, '0');
                    const seconds = String(now.getSeconds()).padStart(2, '0');
                    const timeString = `${hours}:${minutes}:${seconds}`;

                    this.todayAttendance.checkOut = timeString;

                    // Update today's record
                    const today = now.toISOString().split('T')[0];
                    const existingIndex = this.attendanceRecords.findIndex(record => record.date ===
                        today);

                    if (existingIndex !== -1) {
                        this.attendanceRecords[existingIndex].checkOut = timeString;

                        // Check if it's a half day
                        const [inHours, inMinutes] = this.attendanceRecords[existingIndex].checkIn
                            .split(':');
                        const inTime = new Date();
                        inTime.setHours(parseInt(inHours), parseInt(inMinutes), 0);

                        const outTime = new Date();
                        outTime.setHours(parseInt(hours), parseInt(minutes), parseInt(seconds));

                        const diffMs = outTime - inTime;
                        const diffHrs = diffMs / (1000 * 60 * 60);

                        if (diffHrs < 6) {
                            this.attendanceRecords[existingIndex].status = 'Half Day';
                        }
                    }

                    alert('Check-out successful!');
                },

                get recentAttendanceRecords() {
                    return this.attendanceRecords.slice(0, 5);
                },

                get filteredAttendanceRecords() {
                    return this.attendanceRecords.filter(record => {
                        // Filter by month
                        if (this.attendanceFilterMonth !== 'all') {
                            const recordMonth = new Date(record.date).getMonth()
                                .toString();
                            if (recordMonth !== this.attendanceFilterMonth) {
                                return false;
                            }
                        }

                        // Filter by status
                        if (this.attendanceFilterStatus !== 'all' && record.status !==
                            this.attendanceFilterStatus) {
                            return false;
                        }

                        return true;
                    });
                },

                countAttendanceByStatus(status) {
                    return this.filteredAttendanceRecords.filter(record => record.status === status)
                        .length;
                },

                exportAttendanceHistory() {
                    alert('Exporting attendance history...');
                    // In a real implementation, this would generate a CSV or PDF file
                },

                // HR System Methods
                toggleMenu(menu) {
                    this.menuOpen[menu] = !this.menuOpen[menu];
                },

                startEditProfile() {
                    this.editProfileData = JSON.parse(JSON.stringify(this.userProfile));
                    this.editingProfile = true;
                },

                saveProfile() {
                    this.userProfile = JSON.parse(JSON.stringify(this.editProfileData));
                    this.editingProfile = false;
                },

                cancelEditProfile() {
                    this.editingProfile = false;
                },

                startEditAddress() {
                    this.editProfileData = JSON.parse(JSON.stringify(this.userProfile));
                    this.editingAddress = true;
                },

                saveAddress() {
                    this.userProfile = JSON.parse(JSON.stringify(this.editProfileData));
                    this.editingAddress = false;
                },

                cancelEditAddress() {
                    this.editingAddress = false;
                },

                submitNewEmployee() {
                    if (this.editingEmployeeIndex !== null) {
                        // Update existing employee
                        this.employees[this.editingEmployeeIndex] = {
                            ...this.newEmployee,
                            showMenu: false,
                        };
                        this.editingEmployeeIndex = null;
                    } else {
                        // Add new employee
                        const newId = `EMP${String(this.employees.length + 1).padStart(
                        3,
                        "0"
                        )}`;
                        this.employees.push({
                            ...this.newEmployee,
                            id: newId,
                            showMenu: false,
                        });

                        alert("Employee updated successfully!");
                    }

                    // Reset form
                    this.newEmployee = {
                        firstName: "",
                        lastName: "",
                        email: "",
                        phone: "",
                        department: "",
                        position: "",
                        status: "Active",
                        startDate: "",
                        address: {
                            street: "",
                            city: "",
                            state: "",
                            zipCode: "",
                            country: "",
                        },
                        emergencyContact: "",
                    };

                    this.currentView = "allEmployees";

                    // After adding/updating employee
                    this.$nextTick(() => {
                        this.initEmployeeChart();
                    });
                },

                editEmployee(index) {
                    const employee = this.paginatedEmployees[index];
                    const originalIndex = this.employees.findIndex(
                        (e) => e.id === employee.id
                    );

                    this.editingEmployeeIndex = originalIndex;
                    this.newEmployee = JSON.parse(
                        JSON.stringify(this.employees[originalIndex])
                    );
                    this.employees[originalIndex].showMenu = false;

                    this.currentView = "addEmployee";
                },

                deleteEmployee(index) {
                    if (confirm("Are you sure you want to delete this employee?")) {
                        const employee = this.paginatedEmployees[index];
                        const originalIndex = this.employees.findIndex(
                            (e) => e.id === employee.id
                        );

                        this.employees.splice(originalIndex, 1);
                        // After deleting employee
                        this.$nextTick(() => {
                            this.initEmployeeChart();
                        });
                    }
                },

                changeEmployeeStatus(index, status) {
                    const employee = this.paginatedEmployees[index];
                    const originalIndex = this.employees.findIndex(
                        (e) => e.id === employee.id
                    );

                    this.employees[originalIndex].status = status;
                    this.employees[originalIndex].showMenu = false;

                    // After changing status
                    this.$nextTick(() => {
                        this.initEmployeeChart();
                    });
                },

                toggleEmployeeMenu(index) {
                    // Close all other menus first
                    this.paginatedEmployees.forEach((emp, i) => {
                        if (i !== index) {
                            const originalIndex = this.employees.findIndex(
                                (e) => e.id === emp.id
                            );
                            if (originalIndex !== -1) {
                                this.employees[originalIndex].showMenu = false;
                            }
                        }
                    });

                    // Toggle the selected menu
                    const employee = this.paginatedEmployees[index];
                    const originalIndex = this.employees.findIndex(
                        (e) => e.id === employee.id
                    );

                    if (originalIndex !== -1) {
                        this.employees[originalIndex].showMenu = !this.employees[originalIndex]
                            .showMenu;
                    }
                },

                toggleLeaveRequestMenu(index) {
                    // Close all other menus first
                    this.paginatedLeaveRequests.forEach((emp, i) => {
                        if (i !== index) {
                            const originalIndex = this.leaveRequests.findIndex(
                                (e) => e.id === emp.id
                            );
                            if (originalIndex !== -1) {
                                this.leaveRequests[originalIndex].showMenu = false;
                            }
                        }
                    });

                    // Toggle the selected menu
                    const leaveRequest = this.paginatedLeaveRequests[index];
                    const originalIndex = this.leaveRequests.findIndex(
                        (e) => e.id === leaveRequest.id
                    );

                    if (originalIndex !== -1) {
                        this.leaveRequests[originalIndex].showMenu = !this.leaveRequests[
                            originalIndex].showMenu;
                    }
                },

                getSortLabelEmployee() {
                    switch (this.employeeSortType) {
                        case "name-asc":
                            return "Name (A-Z)";
                        case "name-desc":
                            return "Name (Z-A)";
                        case "id":
                            return "Employee ID";
                        default:
                            return "Sort by";
                    }
                },

                getSortLabelLeaveRequest() {
                    switch (this.leaveRequestSortType) {
                        case "name-asc":
                            return "Name (A-Z)";
                        case "name-desc":
                            return "Name (Z-A)";
                        case "id":
                            return "Leave Request ID";
                        default:
                            return "Sort by";
                    }
                },

                setEmployeeSort(type) {
                    this.employeeSortType = type;
                    this.employeePage = 1;
                },

                setLeaveRequestSort(type) {
                    this.leaveRequestSortType = type;
                    this.leaveRequestPage = 1;
                },

                get filteredEmployees() {
                    if (!this.employeeSearch) {
                        return this.employees;
                    }

                    const search = this.employeeSearch.toLowerCase();
                    return this.employees.filter((employee) => {
                        return (
                            employee.firstName.toLowerCase().includes(search) ||
                            employee.lastName.toLowerCase().includes(search) ||
                            employee.email.toLowerCase().includes(search) ||
                            employee.department.toLowerCase().includes(search) ||
                            employee.position.toLowerCase().includes(search) ||
                            employee.id.toLowerCase().includes(search)
                        );
                    });
                },

                get filteredLeaveRequests() {
                    if (!this.leaveRequestSearch) {
                        return this.leaveRequests;
                    }

                    const search = this.leaveRequestSearch.toLowerCase();
                    return this.leaveRequests.filter((request) => {
                        return (
                            request.employee.toLowerCase().includes(search) ||
                            request.type.toLowerCase().includes(search) ||
                            request.startDate.toLowerCase().includes(search) ||
                            request.endDate.toLowerCase().includes(search)
                        );
                    });
                },

                get sortedEmployees() {
                    const filtered = [...this.filteredEmployees];

                    switch (this.employeeSortType) {
                        case "name-asc":
                            return filtered.sort((a, b) => {
                                const nameA = `${a.firstName} ${a.lastName}`
                                    .toLowerCase();
                                const nameB = `${b.firstName} ${b.lastName}`
                                    .toLowerCase();
                                return nameA.localeCompare(nameB);
                            });
                        case "name-desc":
                            return filtered.sort((a, b) => {
                                const nameA = `${a.firstName} ${a.lastName}`
                                    .toLowerCase();
                                const nameB = `${b.firstName} ${b.lastName}`
                                    .toLowerCase();
                                return nameB.localeCompare(nameA);
                            });
                        case "id":
                            return filtered.sort((a, b) => a.id.localeCompare(b.id));
                        default:
                            return filtered;
                    }
                },

                get sortedLeaveRequests() {
                    const filtered = [...this.filteredLeaveRequests];

                    switch (this.leaveRequestSortType) {
                        case "name-asc":
                            return filtered.sort((a, b) => {
                                const nameA = `${a.firstName} ${a.lastName}`
                                    .toLowerCase();
                                const nameB = `${b.firstName} ${b.lastName}`
                                    .toLowerCase();
                                return nameA.localeCompare(nameB);
                            });
                        case "name-desc":
                            return filtered.sort((a, b) => {
                                const nameA = `${a.firstName} ${a.lastName}`
                                    .toLowerCase();
                                const nameB = `${b.firstName} ${b.lastName}`
                                    .toLowerCase();
                                return nameB.localeCompare(nameA);
                            });
                        case "id":
                            return filtered.sort((a, b) => a.id.localeCompare(b.id));
                        default:
                            return filtered;
                    }
                },

                get paginatedEmployees() {
                    const start = (this.employeePage - 1) * this.employeesPerPage;
                    const end = start + this.employeesPerPage;
                    return this.sortedEmployees.slice(start, end);
                },

                get paginatedLeaveRequests() {
                    const start = (this.leaveRequestPage - 1) * this.leaveRequestsPerPage;
                    const end = start + this.leaveRequestsPerPage;
                    return this.sortedLeaveRequests.slice(start, end);
                },

                nextEmployeePage() {
                    const maxPage = Math.ceil(
                        this.sortedEmployees.length / this.employeesPerPage
                    );
                    if (this.employeePage < maxPage) {
                        this.employeePage++;
                    }
                },

                nextLeaveRequestPage() {
                    const maxPage = Math.ceil(
                        this.sortedLeaveRequests.length / this.leaveRequestsPerPage
                    );
                    if (this.leaveRequestPage < maxPage) {
                        this.leaveRequestPage++;
                    }
                },

                prevEmployeePage() {
                    if (this.employeePage > 1) {
                        this.employeePage--;
                    }
                },

                prevLeaveRequestPage() {
                    if (this.leaveRequestPage > 1) {
                        this.leaveRequestPage--;
                    }
                },

                submitLeaveRequest() {
                    // Calculate days
                    const start = new Date(this.newRequest.startDate);
                    const end = new Date(this.newRequest.endDate);
                    const diffTime = Math.abs(end - start);
                    const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24)) + 1;

                    this.leaveRequests.push({
                        employee: `${this.userProfile.firstName} ${this.userProfile.lastName}`,
                        type: this.newRequest.type,
                        startDate: this.newRequest.startDate,
                        endDate: this.newRequest.endDate,
                        days: diffDays,
                        status: "Pending",
                        reason: this.newRequest.reason,
                        contactInfo: this.newRequest.contactInfo,
                    });

                    // Reset form
                    this.newRequest = {
                        type: "",
                        startDate: "",
                        endDate: "",
                        days: 1,
                        reason: "",
                        contactInfo: "",
                    };

                    // Go back to leave requests list
                    this.currentView = "allRequests";
                },

                viewLeaveRequestDetails(request) {
                    this.selectedRequest = request;
                    this.showViewModal = true;
                },

                approveLeaveRequest(index) {
                    this.leaveRequests[index].status = "Approved";
                },

                rejectLeaveRequest(index) {
                    const reason = prompt("Please provide a reason for rejection:");
                    if (reason !== null) {
                        this.leaveRequests[index].status = "Rejected";
                        this.leaveRequests[index].rejectionReason =
                            reason || "No reason provided";
                    }
                },

                getLeaveRequestIndex(request) {
                    return this.leaveRequests.findIndex(
                        (r) =>
                        r.employee === request.employee &&
                        r.startDate === request.startDate &&
                        r.type === request.type
                    );
                },

                toggleLeaveRequestMenu(index) {
                    this.leaveRequestMenuOpen =
                        this.leaveRequestMenuOpen === index ? null : index;
                },

                get pendingLeaveRequests() {
                    return this.leaveRequests.filter(
                        (request) => request.status === "Pending"
                    );
                },

                get recentHires() {
                    const thirtyDaysAgo = new Date();
                    thirtyDaysAgo.setDate(thirtyDaysAgo.getDate() - 30);

                    return this.employees.filter((employee) => {
                        const startDate = new Date(employee.startDate);
                        return startDate >= thirtyDaysAgo;
                    });
                },

                formatDate(dateString) {
                    const date = new Date(dateString);
                    return date.toLocaleDateString("en-US", {
                        year: "numeric",
                        month: "short",
                        day: "numeric",
                    });
                },

                filterPaySlips() {
                    this.filteredPaySlips = this.paySlips.filter((slip) => {
                        const matchesYear = slip.period.includes(this.selectedYear);
                        const matchesSearch =
                            this.paySlipSearch === "" ||
                            slip.period
                            .toLowerCase()
                            .includes(this.paySlipSearch.toLowerCase()) ||
                            slip.netPay
                            .toLowerCase()
                            .includes(this.paySlipSearch.toLowerCase());

                        return matchesYear && matchesSearch;
                    });

                    this.paySlipPage = 1;
                },

                get paginatedPaySlips() {
                    const start = (this.paySlipPage - 1) * this.paySlipsPerPage;
                    const end = start + this.paySlipsPerPage;
                    return this.filteredPaySlips.slice(start, end);
                },

                nextPaySlipPage() {
                    const maxPage = Math.ceil(
                        this.filteredPaySlips.length / this.paySlipsPerPage
                    );
                    if (this.paySlipPage < maxPage) {
                        this.paySlipPage++;
                    }
                },

                prevPaySlipPage() {
                    if (this.paySlipPage > 1) {
                        this.paySlipPage--;
                    }
                },

                viewPaySlip(slip) {
                    this.selectedPaySlip = slip;
                    this.showPaySlipModal = true;
                },

                downloadPaySlip(slip) {
                    alert(`Downloading pay slip for ${slip.period}...`);
                },

                editWorkSchedule(index) {
                    this.editingWorkScheduleIndex = index;
                    this.editingWorkSchedule = {
                        ...this.workSchedules[index]
                    };
                    this.showEditWorkScheduleModal = true;
                },

                saveWorkSchedule() {
                    if (this.editingWorkScheduleIndex !== null) {
                        this.workSchedules[this.editingWorkScheduleIndex] = {
                            ...this.editingWorkSchedule,
                        };
                    }

                    this.showEditWorkScheduleModal = false;
                },

                get paginatedAttendanceRecords() {
                    const start = (this.reportPage - 1) * this.reportsPerPage;
                    const end = start + this.reportsPerPage;
                    return this.filteredReports.slice(start, end);
                },

                get filteredReports() {
                    // Start with all reports
                    let reports = [...this.employeeAttendanceReports];

                    // Filter by search term if provided
                    if (this.reportSearch) {
                        const search = this.reportSearch.toLowerCase();
                        reports = reports.filter(report =>
                            report.name.toLowerCase().includes(search) ||
                            report.workSchedule.toLowerCase().includes(search)
                        );
                    }

                    // Sort reports based on sort type
                    switch (this.reportSortType) {
                        case "name-asc":
                            reports.sort((a, b) => a.name.localeCompare(b.name));
                            break;
                        case "name-desc":
                            reports.sort((a, b) => b.name.localeCompare(a.name));
                            break;
                        case "attendance-high":
                            reports.sort((a, b) => b.attend - a.attend);
                            break;
                        case "attendance-low":
                            reports.sort((a, b) => a.attend - b.attend);
                            break;
                    }

                    return reports;
                },

                filterReports() {
                    this.reportPage = 1; // Reset to first page when filtering
                    console.log(`Filtering reports for ${this.reportMonth} ${this.reportYear}`);
                },

                setReportSort(type) {
                    this.reportSortType = type;
                    this.reportPage = 1; // Reset to first page when sorting
                },

                nextReportPage() {
                    const maxPage = Math.ceil(this.filteredReports.length / this.reportsPerPage);
                    if (this.reportPage < maxPage) {
                        this.reportPage++;
                    }
                },

                prevReportPage() {
                    if (this.reportPage > 1) {
                        this.reportPage--;
                    }
                },

                initReports() {
                    this.filteredReports = [...this.employeeAttendanceReports];
                },

                printReport() {
                    alert(
                        `Printing report for ${this.reportMonth} ${this.reportYear}...`
                    );
                },

                initEmployeeChart() {
                    const ctx = document.getElementById("employeeChart");
                    if (!ctx) return;

                    // Destroy existing chart if it exists
                    if (this.employeeChart) {
                        this.employeeChart.destroy();
                    }

                    // Count employees by department
                    const departments = {};
                    this.employees.forEach((employee) => {
                        if (departments[employee.department]) {
                            departments[employee.department]++;
                        } else {
                            departments[employee.department] = 1;
                        }
                    });

                    // Create chart
                    this.employeeChart = new Chart(ctx, {
                        type: "bar",
                        data: {
                            labels: Object.keys(departments),
                            datasets: [{
                                label: "Number of Employees",
                                data: Object.values(departments),
                                backgroundColor: [
                                    "rgba(255, 99, 132, 0.2)",
                                    "rgba(54, 162, 235, 0.2)",
                                    "rgba(255, 206, 86, 0.2)",
                                    "rgba(75, 192, 192, 0.2)",
                                    "rgba(153, 102, 255, 0.2)",
                                    "rgba(255, 159, 64, 0.2)",
                                ],
                                borderColor: [
                                    "rgba(255, 99, 132, 1)",
                                    "rgba(54, 162, 235, 1)",
                                    "rgba(255, 206, 86, 1)",
                                    "rgba(75, 192, 192, 1)",
                                    "rgba(153, 102, 255, 1)",
                                    "rgba(255, 159, 64, 1)",
                                ],
                                borderWidth: 1,
                            }, ],
                        },
                        options: {
                            responsive: true,
                            maintainAspectRatio: true,
                            scales: {
                                y: {
                                    beginAtZero: true,
                                    ticks: {
                                        stepSize: 1,
                                    },
                                },
                            },
                        },
                    });
                },

                // Calendar Methods
                get calendarDays() {
                    const firstDay = new Date(this.currentYear, this.currentMonth, 1);
                    const lastDay = new Date(
                        this.currentYear,
                        this.currentMonth + 1,
                        0
                    );
                    const daysInMonth = lastDay.getDate();
                    const startingDayOfWeek = firstDay.getDay();

                    // Get the previous month's days that appear in this month's calendar
                    const prevMonthLastDay = new Date(
                        this.currentYear,
                        this.currentMonth,
                        0
                    ).getDate();

                    const days = [];

                    // Previous month's days
                    for (let i = 0; i < startingDayOfWeek; i++) {
                        const prevMonthDay = prevMonthLastDay - startingDayOfWeek + i + 1;
                        const prevMonth =
                            this.currentMonth === 0 ? 11 : this.currentMonth - 1;
                        const prevYear =
                            this.currentMonth === 0 ?
                            this.currentYear - 1 :
                            this.currentYear;

                        days.push({
                            date: prevMonthDay,
                            month: prevMonth,
                            year: prevYear,
                            isCurrentMonth: false,
                            isToday: this.isToday(prevYear, prevMonth, prevMonthDay),
                            dayOfWeek: i % 7,
                        });
                    }

                    // Current month's days
                    for (let i = 1; i <= daysInMonth; i++) {
                        days.push({
                            date: i,
                            month: this.currentMonth,
                            year: this.currentYear,
                            isCurrentMonth: true,
                            isToday: this.isToday(this.currentYear, this.currentMonth,
                                i),
                            dayOfWeek: (startingDayOfWeek + i - 1) % 7,
                        });
                    }

                    // Next month's days to fill out the calendar grid (6 rows x 7 columns = 42 cells)
                    const remainingDays = 42 - days.length;
                    for (let i = 1; i <= remainingDays; i++) {
                        const nextMonth =
                            this.currentMonth === 11 ? 0 : this.currentMonth + 1;
                        const nextYear =
                            this.currentMonth === 11 ?
                            this.currentYear + 1 :
                            this.currentYear;

                        days.push({
                            date: i,
                            month: nextMonth,
                            year: nextYear,
                            isCurrentMonth: false,
                            isToday: this.isToday(nextYear, nextMonth, i),
                            dayOfWeek: (startingDayOfWeek + daysInMonth + i - 1) % 7,
                        });
                    }

                    return days;
                },

                get weekDays() {
                    const days = [];
                    const today = new Date();
                    const currentDay = today.getDay(); // 0 = Sunday, 1 = Monday, etc.

                    // Start the week on the current day
                    for (let i = 0; i < 7; i++) {
                        const date = new Date(today);
                        date.setDate(today.getDate() - currentDay + i);

                        days.push({
                            date: date.getDate(),
                            month: date.getMonth(),
                            year: date.getFullYear(),
                            dayOfWeek: date.getDay(),
                            isToday: this.isToday(
                                date.getFullYear(),
                                date.getMonth(),
                                date.getDate()
                            ),
                        });
                    }

                    return days;
                },

                isToday(year, month, day) {
                    const today = new Date();
                    return (
                        year === today.getFullYear() &&
                        month === today.getMonth() &&
                        day === today.getDate()
                    );
                },

                formatDate(date) {
                    return `${date.getFullYear()}-${String(
                        date.getMonth() + 1
                    ).padStart(2, "0")}-${String(date.getDate()).padStart(2, "0")}`;
                },

                formatHour(hour) {
                    const h = hour % 12 || 12;
                    const ampm = hour < 12 ? "AM" : "PM";
                    return `${h}:00 ${ampm}`;
                },

                formatEventTime(event) {
                    if (event.allDay) {
                        return "All day";
                    }

                    const formatTime = (timeStr) => {
                        const [hours, minutes] = timeStr.split(":");
                        const h = parseInt(hours) % 12 || 12;
                        const ampm = parseInt(hours) < 12 ? "AM" : "PM";
                        return `${h}:${minutes} ${ampm}`;
                    };

                    return `${formatTime(event.startTime)} - ${formatTime(
                        event.endTime
                    )}`;
                },

                formatEventDate(event) {
                    const date = new Date(event.date);
                    const options = {
                        weekday: "long",
                        year: "numeric",
                        month: "long",
                        day: "numeric",
                    };
                    return date.toLocaleDateString("en-US", options);
                },

                getEventsForDate(day) {
                    const dateStr = `${day.year}-${String(day.month + 1).padStart(
                        2,
                        "0"
                    )}-${String(day.date).padStart(2, "0")}`;
                    return this.events.filter((event) => event.date === dateStr);
                },

                getEventsForDay(day) {
                    const dateStr = `${day.year}-${String(day.month + 1).padStart(
                        2,
                        "0"
                    )}-${String(day.date).padStart(2, "0")}`;
                    return this.events.filter((event) => event.date === dateStr);
                },

                getEventTop(event) {
                    if (event.allDay) return 0;

                    const [hours, minutes] = event.startTime.split(":");
                    return ((parseInt(hours) * 60 + parseInt(minutes)) / 60) * 20;
                },

                getEventHeight(event) {
                    if (event.allDay) return 20;

                    const [startHours, startMinutes] = event.startTime.split(":");
                    const [endHours, endMinutes] = event.endTime.split(":");

                    const startMinutesTotal =
                        parseInt(startHours) * 60 + parseInt(startMinutes);
                    const endMinutesTotal =
                        parseInt(endHours) * 60 + parseInt(endMinutes);

                    const durationMinutes = endMinutesTotal - startMinutesTotal;
                    return Math.max(20, (durationMinutes / 60) * 20);
                },

                prevMonth() {
                    if (this.currentMonth === 0) {
                        this.currentMonth = 11;
                        this.currentYear--;
                    } else {
                        this.currentMonth--;
                    }
                    this.generateCalendarDays();
                },

                nextMonth() {
                    if (this.currentMonth === 11) {
                        this.currentMonth = 0;
                        this.currentYear++;
                    } else {
                        this.currentMonth++;
                    }
                    this.generateCalendarDays();
                },

                setToday() {
                    const today = new Date();
                    this.currentMonth = today.getMonth();
                    this.currentYear = today.getFullYear();
                    this.selectedDay = {
                        date: today.getDate(),
                        month: today.getMonth(),
                        year: today.getFullYear(),
                        dayOfWeek: today.getDay(),
                    };
                    this.generateCalendarDays();
                    this.generateWeekDays();
                },

                changeView(view) {
                    this.calendarView = view;
                    if (view === "Week") {
                        this.generateWeekDays();
                    }
                },

                generateCalendarDays() {
                    // This is handled by the computed property 'calendarDays'
                },

                generateWeekDays() {
                    // This is handled by the computed property 'weekDays'
                },

                addNewEvent() {
                    const today = new Date();
                    this.editingEvent = {
                        id: null,
                        title: "",
                        type: "meeting",
                        date: this.formatDate(today),
                        allDay: false,
                        startTime: "09:00",
                        endTime: "10:00",
                        description: "",
                    };
                    this.showEventModal = true;
                },

                addEventForDate(day) {
                    const date = new Date(day.year, day.month, day.date);
                    this.editingEvent = {
                        id: null,
                        title: "",
                        type: "meeting",
                        date: this.formatDate(date),
                        allDay: false,
                        startTime: "09:00",
                        endTime: "10:00",
                        description: "",
                    };
                    this.showEventModal = true;
                },

                addEventForDateAndHour(day, hour) {
                    const date = new Date(day.year, day.month, day.date);
                    const startHour = String(hour).padStart(2, "0");
                    const endHour = String(hour + 1).padStart(2, "0");

                    this.editingEvent = {
                        id: null,
                        title: "",
                        type: "meeting",
                        date: this.formatDate(date),
                        allDay: false,
                        startTime: `${startHour}:00`,
                        endTime: `${endHour}:00`,
                        description: "",
                    };
                    this.showEventModal = true;
                },

                saveEvent() {
                    if (this.editingEvent.id) {
                        // Update existing event
                        const index = this.events.findIndex(
                            (e) => e.id === this.editingEvent.id
                        );
                        if (index !== -1) {
                            this.events[index] = {
                                ...this.editingEvent
                            };
                        }
                    } else {
                        // Add new event
                        const newId =
                            this.events.length > 0 ?
                            Math.max(...this.events.map((e) => e.id)) + 1 :
                            1;
                        this.events.push({
                            ...this.editingEvent,
                            id: newId,
                        });
                    }

                    this.showEventModal = false;
                },

                viewEvent(event) {
                    this.selectedEvent = {
                        ...event
                    };
                    this.showViewEventModal = true;
                },

                editEvent(event) {
                    this.editingEvent = {
                        ...event
                    };
                    this.showViewEventModal = false;
                    this.showEventModal = true;
                },

                deleteEvent(eventId) {
                    if (confirm("Are you sure you want to delete this event?")) {
                        const id = eventId || this.editingEvent.id;
                        this.events = this.events.filter((e) => e.id !== id);
                        this.showViewEventModal = false;
                        this.showEventModal = false;
                    }
                },

            }));
        });
    </script>
</body>

</html>